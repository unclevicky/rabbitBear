<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Rabbit &amp; Bear</title>
  
  
  <link href="https://unclevicky.github.io/rabbitBear/atom.xml" rel="self"/>
  
  <link href="https://unclevicky.github.io/rabbitBear/"/>
  <updated>2023-12-20T15:20:56.177Z</updated>
  <id>https://unclevicky.github.io/rabbitBear/</id>
  
  <author>
    <name>bear</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>win11中安装copilot</title>
    <link href="https://unclevicky.github.io/rabbitBear/2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/"/>
    <id>https://unclevicky.github.io/rabbitBear/2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/</id>
    <published>2023-12-20T14:23:41.000Z</published>
    <updated>2023-12-20T15:20:56.177Z</updated>
    
    <content type="html"><![CDATA[<p>最近万番尝试各种AI工具，发现了一个被忽略的免费AI助手—Copilot。</p><p>只要你是Windows电脑，下载Copilot软件，就可以开始你的提问了。完全免费。</p><p>此篇文章感谢熊先生悉心整理，大家按照步骤一步步来，100%可行。</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><font color="#ff0000">Copilot，中文是“一起起飞”，</font>是微软在Windows 11中加入的AI助手，<font color="#ff0000">集成在了操作系统中的侧边栏工具</font>。</p><p>Copilot依托于底层大语言模型（LLM），<font color="#ff0000">用户只需说几句话，做出指示，它就可以创建类似人类撰写的文本、绘制图片等</font>。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="方法1：windows自动更新到23H2及以上版本（推荐）"><a href="#方法1：windows自动更新到23H2及以上版本（推荐）" class="headerlink" title="方法1：windows自动更新到23H2及以上版本（推荐）"></a>方法1：windows自动更新到23H2及以上版本（推荐）</h3><p><font color="#ff0000">这是最推荐的方法。</font></p><p>![[Pasted image 20231220222914.png]]</p><p>如果能自动更新成功，是最简单最完美的。<br>但有时候会更新失败，而且尝试了各种方法，比如手动下载升级包进行安装，依然安装失败。<br>那这种情况可尝试方法2。</p><h3 id="方法2：使用安装媒体升级（非重装）"><a href="#方法2：使用安装媒体升级（非重装）" class="headerlink" title="方法2：使用安装媒体升级（非重装）"></a>方法2：使用安装媒体升级（非重装）</h3><p><font color="#ff0000">1. 在microsoft官网，下载一个媒体创建工具；</font></p><p><font color="#ff0000">2. 使用该工具，下载U盘（需要8G以上）或者ISO版本</font></p><p>注意：</p><p>下载过程，一定要<strong>选择默认推荐的版本，这个版本是和自己电脑相同版本</strong>。只有版本相同才能直接升级，否则就只能覆盖安装。</p><p>![[Pasted image 20231220223019.png]]</p><p><font color="#ff0000">3. 打开制作好的U盘或者ISO文件，运行setup文件，按提示一步步操作即可。</font></p><p>注：</p><ol><li><strong>一定要点升级安装，</strong>这样可以保留现有的文件和安装的应用程序；</li><li><strong>一定不要使用U盘或者DVD启动，</strong>这种方式只能重新安装，或默认覆盖，之前安装的软件和保存在系统盘里的内容都会被清除。</li></ol><p>![[Pasted image 20231218221139.png]]<br>![[Pasted image 20231218221642.png]]</p><h3 id="方法3：使用Windows-11-安装助手"><a href="#方法3：使用Windows-11-安装助手" class="headerlink" title="方法3：使用Windows 11 安装助手"></a>方法3：使用Windows 11 安装助手</h3><p>1.登录microsoft官网,win11安装助手页面</p><p>2.根据提示，一步一步的操作即可，<font color="#ff0000">后面的步骤跟方法2中一样</font>。</p><h3 id="方法4：不升级系统，直接安装功能启用包"><a href="#方法4：不升级系统，直接安装功能启用包" class="headerlink" title="方法4：不升级系统，直接安装功能启用包"></a>方法4：不升级系统，直接安装功能启用包</h3><p>1.下载23H2 功能启用包</p><p>2.解压后，找到自己电脑对应的安装包安装即可</p><p>注：如果不知道哪个是，都点一遍也行，因为如果跟自己电脑不匹配会报错，无法安装。</p><h3 id="检查是否安装成功"><a href="#检查是否安装成功" class="headerlink" title="检查是否安装成功"></a>检查是否安装成功</h3><p>升级安装后，会在windows状态栏出现一个copilot的应用图标。</p><p>如下图所示，即表示安装成功。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="打开copilot之后，即可进入使用界面"><a href="#打开copilot之后，即可进入使用界面" class="headerlink" title="打开copilot之后，即可进入使用界面"></a>打开copilot之后，即可进入使用界面</h3><p>可以使用bing聊天，答疑、写作、绘画等，与使用chatgpt一样的方式；<br>他也可以帮忙打开某个应用程序、更换电脑背景、调整电脑声音、做系统设置等等</p><h3 id="场景一：聊天"><a href="#场景一：聊天" class="headerlink" title="场景一：聊天"></a><font color="#ff0000">场景一：聊天</font></h3><h3 id="场景二：画图"><a href="#场景二：画图" class="headerlink" title=" 场景二：画图"></a><font color="#ff0000"> 场景二：画图</font></h3><h3 id="可能的问题"><a href="#可能的问题" class="headerlink" title="可能的问题"></a>可能的问题</h3><p><strong>问题1：提示不在服务区域。</strong><br>原因：因为copilot暂不对中国大陆开放。</p><p>解决方法：edge浏览器，打开newbing页面，设置区域为其他区域，例如“美国”。</p><h3 id="问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）"><a href="#问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）" class="headerlink" title="问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）"></a>问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）</h3><p>解决方法：刷新即可；或者在newbing里，换个区域，再刷新，成功率更高。</p><p>祝成为AI时代的我们。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近万番尝试各种AI工具，发现了一个被忽略的免费AI助手—Copilot。&lt;/p&gt;
&lt;p&gt;只要你是Windows电脑，下载Copilot软件，就可以开始你的提问了。完全免费。&lt;/p&gt;
&lt;p&gt;此篇文章感谢熊先生悉心整理，大家按照步骤一步步来，100%可行。&lt;/p&gt;
&lt;h2 i</summary>
      
    
    
    
    <category term="专业" scheme="https://unclevicky.github.io/rabbitBear/categories/%E4%B8%93%E4%B8%9A/"/>
    
    <category term="技术" scheme="https://unclevicky.github.io/rabbitBear/categories/%E4%B8%93%E4%B8%9A/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="教程" scheme="https://unclevicky.github.io/rabbitBear/categories/%E4%B8%93%E4%B8%9A/%E6%8A%80%E6%9C%AF/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="技术" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="教程" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>数据要素相关政策</title>
    <link href="https://unclevicky.github.io/rabbitBear/2023/12/02/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0%E7%9B%B8%E5%85%B3%E6%94%BF%E7%AD%96/"/>
    <id>https://unclevicky.github.io/rabbitBear/2023/12/02/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0%E7%9B%B8%E5%85%B3%E6%94%BF%E7%AD%96/</id>
    <published>2023-12-02T04:45:05.000Z</published>
    <updated>2023-12-02T08:00:14.359Z</updated>
    
    <content type="html"><![CDATA[<h2 id="政策发布情况"><a href="#政策发布情况" class="headerlink" title="政策发布情况"></a>政策发布情况</h2><h3 id="政策框架：-1-N"><a href="#政策框架：-1-N" class="headerlink" title="政策框架： 1+N"></a><strong>政策框架：</strong> 1+N</h3><pre><code>1个顶层设计文件《关于构建数据基础制度更好发挥数据要素作用的意见》N个具体措施，包括数据确权、流通交易、收益分配、安全治理等</code></pre><h3 id="中国数字经济与数据要素相关政策"><a href="#中国数字经济与数据要素相关政策" class="headerlink" title="中国数字经济与数据要素相关政策"></a>中国数字经济与数据要素相关政策</h3><table><thead><tr><th>发起部门</th><th>时间</th><th>事件&#x2F;政策名称</th></tr></thead><tbody><tr><td>国务院</td><td>2014年3月</td><td>大数据首次写入《政府工作报告》</td></tr><tr><td>国务院</td><td>2015年8月</td><td>《促进大数据发展行动纲要》</td></tr><tr><td>中共中央办公厅、国务院办公厅</td><td>2016年7月</td><td>《国家信息化发展战略纲要》</td></tr><tr><td>国务院</td><td>2016年9月</td><td>《政务信息资源共享管理暂行办法》</td></tr><tr><td>工信部</td><td>2016年12月</td><td>《大数据产业发展规划 (2016-2020 年)》</td></tr><tr><td>中央全面深化改革领导小组</td><td>2017年2月</td><td>《关于推进公共信息资源开放的若干意见的通知》</td></tr><tr><td>国务院办公厅</td><td>2017年5月</td><td>《政务信息系统整合共享实施方案》</td></tr><tr><td>国家发改委、中央网信办</td><td>2017年7月</td><td>《政务信息资源目录编制指南 (试行)》</td></tr><tr><td>国家发改委</td><td>2017年10月</td><td>《关于开展政务信息系统整合共享应用试点的通知》</td></tr><tr><td>中国网信办、发改委、工信部</td><td>2018年1月</td><td>《公共信息资源开放试点工作方案》</td></tr><tr><td>中共中央办公厅、国务院办公厅</td><td>2020年3月</td><td>《关于构建更加完善的要素市场化配置体制机制的意见》</td></tr><tr><td>中共中央、国务院</td><td>2020年5月</td><td>《关于新时代加快完善社会主义市场经济体制的意见》</td></tr><tr><td>中共中央办公厅、国务院办公厅</td><td>2021年1月</td><td>《建设高标准市场体系行动方案》</td></tr><tr><td>国家发改委、中央网信办、工信部、国家能源局</td><td>2021年5月</td><td>《全国一体化大数据中心协同创新体系算力枢纽实施方案》</td></tr><tr><td>全国人大</td><td>2021年6月</td><td>《中华人民共和国数据安全法》</td></tr><tr><td>国务院办公厅</td><td>2022年1月</td><td>《要素市场化配置综合改革试点总体方案》</td></tr><tr><td>国务院</td><td>2022年1月</td><td>《“十四五”数字经济发展规划》</td></tr><tr><td>中共中央、国务院</td><td>2022年3月</td><td>《关于加快建设全国统一大市场的意见》</td></tr><tr><td>国务院</td><td>2022年6月</td><td>《关于加强数字政府建设的指导意见》</td></tr><tr><td>国务院办公厅</td><td>2022年10月</td><td>《全国一体化政务大数据体系建设指南》</td></tr><tr><td>工信部</td><td>2022年12月</td><td>《关于构建数据基础制度更好发挥数据要素作用的意见》</td></tr><tr><td>发改委</td><td>2023年1月</td><td>《建立数据流通和交易制度 培育一批活跃的数据要素市场主体》</td></tr><tr><td>国务院</td><td>2023年2月</td><td>《数字中国建设整体布局规划》</td></tr><tr><td>国务院</td><td>2023年3月</td><td>组建国家数据局</td></tr><tr><td>中共中央、国务院</td><td>2023年3月</td><td>《党和国家机构改革方案》</td></tr><tr><td>财政部</td><td>2023年8月</td><td>《企业数据资源相关会计处理暂行规定》</td></tr></tbody></table><h3 id="典型地区数据要素政策"><a href="#典型地区数据要素政策" class="headerlink" title="典型地区数据要素政策"></a>典型地区数据要素政策</h3><table><thead><tr><th>政策名称</th><th>施行时间</th><th>政策主要内容</th></tr></thead><tbody><tr><td>《北京市数字经济促进例》</td><td>2022年12月</td><td>条例提出，加快数据要素市场培育，探索建立数据要素收益分配机制，推动数据要素有效流动。回应“数据共享”需求，条例设计了统一管理的“公共数据目录”和共享机制，推动公共数据和相关业务系统互联互通。</td></tr><tr><td>《北京市数字经济全产业链开放发展行动方案》</td><td>2022年5月</td><td>利用 2~3 年时间，制定一批数据要素团体标准和地方标准，开放一批数据创新应用的特色示范场景，推动一批数字经济国家试点任务率先落地，出台一批数字经济产业政策和制度规范，加快孵化一批高成长性的数据服务企业，形成一批可复制可推广的经验做法，在全国率先建成活跃有序的数据要素市场体系，数据要素赋能经济高质量发展作用显著发挥，将北京打造成为数字经济全产业链开放发展和创新高地。</td></tr></tbody></table><h3 id="政策推进中重要的节点"><a href="#政策推进中重要的节点" class="headerlink" title="政策推进中重要的节点"></a>政策推进中重要的节点</h3><ol><li>数据二十条</li><li>数据局局长任命</li><li>数据资产入表</li><li>国家数据局挂牌</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;政策发布情况&quot;&gt;&lt;a href=&quot;#政策发布情况&quot; class=&quot;headerlink&quot; title=&quot;政策发布情况&quot;&gt;&lt;/a&gt;政策发布情况&lt;/h2&gt;&lt;h3 id=&quot;政策框架：-1-N&quot;&gt;&lt;a href=&quot;#政策框架：-1-N&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="数据" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%95%B0%E6%8D%AE/"/>
    
    <category term="数据要素" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0/"/>
    
    <category term="行业洞察" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0/%E8%A1%8C%E4%B8%9A%E6%B4%9E%E5%AF%9F/"/>
    
    <category term="专业" scheme="https://unclevicky.github.io/rabbitBear/categories/%E4%B8%93%E4%B8%9A/"/>
    
    <category term="技术" scheme="https://unclevicky.github.io/rabbitBear/categories/%E4%B8%93%E4%B8%9A/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="数据要素" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0/"/>
    
    <category term="数字经济" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%95%B0%E5%AD%97%E7%BB%8F%E6%B5%8E/"/>
    
  </entry>
  
  <entry>
    <title>额尔古纳河右岸读后感</title>
    <link href="https://unclevicky.github.io/rabbitBear/2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/"/>
    <id>https://unclevicky.github.io/rabbitBear/2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/</id>
    <published>2023-03-08T02:02:25.000Z</published>
    <updated>2023-12-02T08:02:51.472Z</updated>
    
    <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p style="text-indent:2em"> 春节前，也就是在放开疫情政策之后，在外地出差的我，也感染了新冠。也就是在这个时候，我从同事那里借来了一本书《额尔古纳河的右岸》。起先是被这个名字所吸引，翻开看了两页，起初的文字，显得很沧桑又很唯美，还有一些看不懂的名词。同时，疫情并不能阻碍我们工作的步伐，虽然发烧咳嗽隔离在宾馆，但还是要坚持工作，也没有时间拿起这边书，直到春节回家，读完了这本书，久久不能平静。</p><p style="text-indent:2em"> 这是一个忧伤的故事，这是一个唯美的故事，这是一个真实的故事。</p><p style="text-indent:2em"> 一直想写点什么，过去几个月了，一直没有动笔。直到最近发生了很多事情，又触发了我内心深处的那份情感</p><p style="text-indent:2em"> “我是雨和雪的老熟人了，我有九十岁了。雨雪看老了我，我也把它们给看老了。”</p><p style="text-indent:2em"> 西班、安草儿、玛克辛姆、尼都萨满……乌力楞、驯鹿……</p><p style="text-indent:2em"> “我不愿意睡在看不到星星的屋子里，我这辈子是伴着星星度过黑夜的。如果午夜梦醒时我望见的是漆黑的屋顶，我的眼睛会瞎的；我的驯鹿没有犯罪，我也不想看到它们蹲进“监狱”。听不到那流水一样的鹿铃声，我一定会耳聋的；我的腿脚习惯了坑坑洼洼的山路，如果让我每天走在城镇平坦的小路上，它们一定会疲软得再也负载不起我的身躯，使我成为一个瘫子；我一直呼吸着山野清新的空气，如果让我去闻布苏的汽车放出的那些“臭屁”，我一定就不会喘气了。我的身体是神灵给予的，我要在山里，把它还给神灵。”        </p><p style="text-indent:2em"> 开头就注定了结局悲剧和无奈……</p><br><img src="/rabbitBear/2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E4%B8%BB%E4%BA%BA%E5%85%AC%E5%8E%9F%E5%9E%8B.jpg" class title="主人公原型"><br><img src="/rabbitBear/2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E7%94%B5%E5%BD%B1%E5%89%A7%E7%85%A7.jpg" class title="电影剧照">]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h2&gt;&lt;p style=&quot;text-indent:2em&quot;&gt; 
春节前，也就是在放开疫情政策之后，在外地出差的我，也感染了新冠。也就是在</summary>
      
    
    
    
    <category term="文学" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%96%87%E5%AD%A6/"/>
    
    <category term="书评" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%96%87%E5%AD%A6/%E4%B9%A6%E8%AF%84/"/>
    
    <category term="品读经典" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%93%81%E8%AF%BB%E7%BB%8F%E5%85%B8/"/>
    
    <category term="茅盾文学奖" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%93%81%E8%AF%BB%E7%BB%8F%E5%85%B8/%E8%8C%85%E7%9B%BE%E6%96%87%E5%AD%A6%E5%A5%96/"/>
    
    
    <category term="读后感" scheme="https://unclevicky.github.io/rabbitBear/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/"/>
    
    <category term="文学" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%96%87%E5%AD%A6/"/>
    
    <category term="矛盾文学奖" scheme="https://unclevicky.github.io/rabbitBear/tags/%E7%9F%9B%E7%9B%BE%E6%96%87%E5%AD%A6%E5%A5%96/"/>
    
  </entry>
  
  <entry>
    <title>【半自动版】python批量下载公众号历史文章（一）</title>
    <link href="https://unclevicky.github.io/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>https://unclevicky.github.io/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/</id>
    <published>2022-07-27T05:50:59.000Z</published>
    <updated>2022-07-30T15:24:28.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="【老博客地址】"><a href="#【老博客地址】" class="headerlink" title="【老博客地址】"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/">【CSDN】博客主页</a><br>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/article/details/100254510">【纯技术交流】python批量下载公众号历史文章（一）</a><br>&emsp;&emsp;<em>(在刊载一段时间后，莫名被吞掉了,所以在这里补档)</em><br>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/article/details/100661899">python批量下载公众号历史文章（二）</a></p><h3 id="【写在前面】"><a href="#【写在前面】" class="headerlink" title="【写在前面】"></a><strong>【写在前面】</strong></h3><p style="text-indent:2em">前些天和同事讨论问题，什么是人才？讨论细节就不表了，最终总结为一句话：能解决问题的人才是人才。自己爱交朋友，很多朋友都在我有困难的时候帮助过我，也希望自己能够帮助朋友，成为能帮朋友解决问题的人才，所以朋友的请求从来都是来者不拒，力所能及之事一定全力办到！</p><p style="text-indent:2em">基于这点，给自己挖了很多坑：前些日子写的学习强国自动学习已经完成了一个初步版本，能够自动读文章、自动学习视频、自动分享，但是还不能自动答题，朋友说已经够用了，不过还是希望有时间了完成这块儿的内容；想读黄易老爷子武侠的那位朋友的问题也解决了，虽然下载下来的文字部分章节格式上有些乱，但也满足了朋友的要求，够用就行；学习Python也是一样，因时间关系没有系统的去学习过，只是通过解决各种问题达到学以致用，够用就行。很多博客文章，写有序号，都是计划要分段完成的，希望自己有一天能把所有的坑都填完了。</p><h3 id="【背景】"><a href="#【背景】" class="headerlink" title="【背景】"></a><strong>【背景】</strong></h3><p style="text-indent:2em">昨天和朋友去野钓，路上谈起股票。今年截止到目前，他的收益是40%多。问他炒股的心得，他是数据流派，经常看财务数据，就推荐了几个公众号，同时提出了一个请求，有些公众号历史文章太多，每次翻看之前的文章都得重头刷，问我能不能把这些文章下载到本地，自己想看的时候就看。想着不难，就答应姑且一试。</p><h3 id="【目标】"><a href="#【目标】" class="headerlink" title="【目标】"></a><strong>【目标】</strong></h3><p>&emsp;&emsp;第一个版本，只是为了实现下载朋友指定的公众号的历史文章，并转换成pdf方便阅读。很多需要手工配合，算是一个半自动的版本吧。<br>&emsp;&emsp;后续会陆续减少手工，并把文章存储在数据库里，支持检索等。</p><h3 id="【思路】"><a href="#【思路】" class="headerlink" title="【思路】"></a><strong>【思路】</strong></h3><p>&emsp;&emsp;和从网页上爬取小说不同，微信的公众号是通过app操作进行爬取，所以不能直接用chrome查看网页源码进行解析，需要用到第三方抓包工具，网上看了下用的比较多的有fiddler和anyproxy，前者比较简单，就选择了前者，思路如下：<br>&emsp;&emsp;1、通过fiddler抓取相应公众号的包（需要手动）；<br>&emsp;&emsp;2、通过python进行解析，获取历史文章列表信息json；<br>&emsp;&emsp;3、通过python进行解析，获取所有文章信息，包括标题、链接等；<br>&emsp;&emsp;4、通过python循环将这些文章下载到本地存为html；<br>&emsp;&emsp;5、通过python将文章里面的图片都保存到本地；<br>&emsp;&emsp;6、通过python将本地html文件里面的图片链接，修改为本地存储图片的路径（因为只存文章还不行，你会发现存到本地的html文件，里面的图片都无法正常显示）；<br>&emsp;&emsp;7、通过python调用wkhtmltopdf工具，将html转换成pdf。</p><h3 id="【工具】"><a href="#【工具】" class="headerlink" title="【工具】"></a><strong>【工具】</strong></h3><p>&emsp;&emsp;1、抓包工具fiddler；<br>&emsp;&emsp;2、html转pdf工具wkhtmltopdf；<br>&emsp;&emsp;3、python3.7及对应的包；<br>&emsp;&emsp;4、电脑版微信或者模拟器或者直接用手机也行（如果用手机或者模拟器，需要设置代理）；</p><h3 id="【准备工作之抓包】"><a href="#【准备工作之抓包】" class="headerlink" title="【准备工作之抓包】"></a><strong>【准备工作之抓包】</strong></h3><p>&emsp;&emsp;有些公众号的包比较特殊，所以要进行不同的处理。以朋友要求的公众号为例（为了避免广告嫌疑，就不写是啥公众号了）。<br>&emsp;&emsp;1、下载fiddler软件，因为公众号里都是https的链接，需要做抓包配置。中间会弹出一些框框让确认，全部点确定就行。<br><br></p><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_setup_1.png" class title="fiddle设置"><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_setup_2.png" class title="fiddle设置"><p>&emsp;&emsp;2、打开电脑版微信，搜索需要的公众号，点开历史文章列表。通过fiddler查看抓到的包的特点。<br><br></p><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_1.png" class title="打开公众号链接"><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_2.png" class title="fiddle分析包特点"><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_3.png" class title="fiddle分析包特点"><p>&emsp;&emsp;3、为了避免其他链接的干扰，配置过滤规则，滤掉不需要的链接。<br><br></p><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_filters.png" class title="股票清单和基本信息-网页"><p>&emsp;&emsp;4、然后清空fiddler的抓取记录，重新点击历史文章，并不断下拉，直到所有链接都显示出来为止。<br><br></p><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_info_1.png" class title="fiddle抓包信息"><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_info_2.png" class title="fiddle抓包信息"><p>&emsp;&emsp;5、将过滤之后获得的所有的seesion，以raw的形式保存到本地。<br><br></p><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_1.png" class title="fiddle保持raw格式session"><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_2.png" class title="fiddle保持raw格式session"><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_3.png" class title="fiddle保持raw格式session"><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_4.png" class title="fiddle保持raw格式session"><h3 id="【编码】"><a href="#【编码】" class="headerlink" title="【编码】"></a><strong>【编码】</strong></h3><p>&emsp;&emsp;<strong>1、标准报文头和需要的包</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># _*_ coding:utf-8 _*_</span><br><span class="line">import os,sys</span><br><span class="line">import requests</span><br><span class="line">import json</span><br><span class="line">import subprocess</span><br><span class="line">import re</span><br><span class="line">import random</span><br><span class="line">import time</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">from datetime import datetime,timedelta</span><br><span class="line">from time import sleep</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>2、定义一个文章类，保存文章的基本信息</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class ArticleInfo():</span><br><span class="line">    def __init__(self,url,title,idx_num): #idx_num是为了方便保存图片命名</span><br><span class="line">        self.url = url</span><br><span class="line">        self.title = title</span><br><span class="line">        self.idx_num = idx_num</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>3、定义读取文件内容的方法（通用）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def read_file(file_path):</span><br><span class="line">    with open(file_path,&quot;r&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">        file_content = f.read()</span><br><span class="line">    return file_content</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>4、定义写文件内容的方法（通用）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def save_file(file_path,file_content):</span><br><span class="line">    with open(file_path,&quot;w&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">        f.write(file_content)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>5、定义下载网页html的方法（通用）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def get_html(url):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class="line">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class="line">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class="line">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class="line">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class="line">    if response.status_code == 200:</span><br><span class="line">        htmltxt = response.text #返回的网页正文</span><br><span class="line">        return htmltxt</span><br><span class="line">    else:</span><br><span class="line">        return None</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>6、定义下载并保存网页图片的方法（通用）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def get_save_image(url,img_file_path):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class="line">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class="line">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class="line">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class="line">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class="line">    with open(img_file_path,&quot;wb&quot;) as f:</span><br><span class="line">        f.write(response.content)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>7、定义调用下载html和图片的方法（主函数调用此方法开始下载）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">def down_html(json_path,html_path):</span><br><span class="line">    if not os.path.exists(html_path):</span><br><span class="line">        os.makedirs(html_path) # 创建保存html文件的文件夹</span><br><span class="line">    local_img_path = os.path.join(html_path,&quot;images&quot;)</span><br><span class="line">    if not os.path.lexists(local_img_path):</span><br><span class="line">        os.makedirs(local_img_path) # 创建保存本地图片的文件夹</span><br><span class="line">    article_list = get_article_list(json_path)</span><br><span class="line">    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列</span><br><span class="line">    tot_article = len(article_list) # 文章的总数量</span><br><span class="line">    i = 0 #计数用</span><br><span class="line">    for atc in article_list:</span><br><span class="line">        i+=1</span><br><span class="line">        atc_unique_name = str(atc.atc_datetime) + &quot;_&quot; + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识</span><br><span class="line">        html_name = atc_unique_name+&quot;.html&quot;</span><br><span class="line">        html_file_path = os.path.join(html_path,html_name)</span><br><span class="line">        print(i,&quot;of&quot;,tot_article,atc_unique_name,atc.title)</span><br><span class="line">        if os.path.exists(html_file_path): # 支持续传</span><br><span class="line">            print(&quot;&#123;&#125; existed already!&quot;.format(html_file_path))</span><br><span class="line">            continue</span><br><span class="line">        org_atc_html = get_html(atc.url)</span><br><span class="line">        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)</span><br><span class="line">        save_file(html_file_path,new_atc_html)</span><br><span class="line">        sleep(round(random.uniform(1,3),2))</span><br><span class="line">        &quot;&quot;&quot;for test</span><br><span class="line">        if i&gt;0 :</span><br><span class="line">            break</span><br><span class="line">        &quot;&quot;&quot;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>8、查看fiddler保存的json文件结构，定义解析json字符串获取文章列表的方法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">def get_article_list(json_path):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    通过抓取的包的json文件，获取所有文章的信息的列表</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径</span><br><span class="line">    article_list = [] # 用来保存所有文章的列表</span><br><span class="line">    for file in file_list:</span><br><span class="line">        file_path = os.path.join(json_path,file)</span><br><span class="line">        file_cont = read_file(file_path)</span><br><span class="line">        json_cont = json.loads(file_cont)</span><br><span class="line">        general_msg_list = json_cont[&#x27;general_msg_list&#x27;]</span><br><span class="line">        json_list = json.loads(general_msg_list)</span><br><span class="line">        #print(json_list[&#x27;list&#x27;][0][&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;])</span><br><span class="line">        for lst in json_list[&#x27;list&#x27;]:</span><br><span class="line">            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名</span><br><span class="line">            seconds_datetime = lst[&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;]</span><br><span class="line">            atc_datetime = seconds_to_time(seconds_datetime)</span><br><span class="line">            if lst[&#x27;comm_msg_info&#x27;][&#x27;type&#x27;] == 49: # 49为普通的图文</span><br><span class="line">                atc_idx+=1</span><br><span class="line">                url = lst[&#x27;app_msg_ext_info&#x27;][&#x27;content_url&#x27;]</span><br><span class="line">                title = lst[&#x27;app_msg_ext_info&#x27;][&#x27;title&#x27;]</span><br><span class="line">                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class="line">                article_list.append(atc_info)</span><br><span class="line">            if 1 == lst[&#x27;app_msg_ext_info&#x27;][&#x27;is_multi&#x27;]: # 一次发多篇</span><br><span class="line">                multi_app_msg_item_list = lst[&#x27;app_msg_ext_info&#x27;][&#x27;multi_app_msg_item_list&#x27;]</span><br><span class="line">                for multi in multi_app_msg_item_list:</span><br><span class="line">                    atc_idx+=1</span><br><span class="line">                    url = multi[&#x27;content_url&#x27;]</span><br><span class="line">                    title = multi[&#x27;title&#x27;]</span><br><span class="line">                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class="line">                    article_list.append(mul_act_info)</span><br><span class="line">    return article_list</span><br></pre></td></tr></table></figure><br><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/raw_info.png" class title="fiddle保持raw具体内容"><p>&emsp;&emsp;<strong>9、定义替换html中图片src为本地图片的方法（不替换，html中的图片将无法显示）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">def chg_img_link(bs_html):</span><br><span class="line">    link_list = bs_html.findAll(&quot;link&quot;)</span><br><span class="line">    for link in link_list:</span><br><span class="line">        href = link.attrs[&quot;href&quot;]</span><br><span class="line">        if href.startswith(&quot;//&quot;):</span><br><span class="line">            new_href = &quot;http:&quot;+href</span><br><span class="line">            link.attrs[&quot;href&quot;]=new_href</span><br><span class="line"> </span><br><span class="line">def rep_image(org_html,local_img_path,html_name):</span><br><span class="line">    bs_html = BeautifulSoup(org_html,&quot;lxml&quot;)</span><br><span class="line">    img_list = bs_html.findAll(&quot;img&quot;)</span><br><span class="line">    img_idx = 0 # 计数和命名用</span><br><span class="line">    for img in img_list:</span><br><span class="line">        img_idx+=1</span><br><span class="line">        org_url = &quot;&quot; # 图片的真实地址</span><br><span class="line">        if &quot;data-src&quot; in img.attrs: # &lt;img  data-src=&quot;...&quot;</span><br><span class="line">            org_url = img.attrs[&#x27;data-src&#x27;]</span><br><span class="line">        elif &quot;src&quot; in img.attrs : # &lt;img  src=&quot;...&quot;</span><br><span class="line">            org_url = img.attrs[&#x27;src&#x27;]</span><br><span class="line">        if org_url.startswith(&quot;//&quot;):</span><br><span class="line">            org_url = &quot;http:&quot; + org_url</span><br><span class="line">        if len(org_url) &gt; 0 :</span><br><span class="line">            print(&quot;download image &quot;,img_idx)</span><br><span class="line">            if &quot;data-type&quot; in img.attrs:</span><br><span class="line">                img_type = img.attrs[&quot;data-type&quot;]</span><br><span class="line">            else:</span><br><span class="line">                img_type = &quot;png&quot;</span><br><span class="line">            img_name = html_name + &quot;_&quot; + str(img_idx) + &quot;.&quot; +img_type</span><br><span class="line">            img_file_path = os.path.join(local_img_path,img_name)</span><br><span class="line">            get_save_image(org_url,img_file_path) # 下载并保存图片</span><br><span class="line">            img.attrs[&quot;src&quot;] = &quot;images/&quot; + img_name</span><br><span class="line">        else:</span><br><span class="line">            img.attrs[&quot;src&quot;] = &quot;&quot;</span><br><span class="line">    chg_img_link(bs_html)</span><br><span class="line">    return str(bs_html)</span><br></pre></td></tr></table></figure><br><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/without_img.png" class title="未替换本地图片源"><img src="/rabbitBear/2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/with_img.png" class title="替换本地图片源"><p>&emsp;&emsp;<strong>10、定义html转换成pdf的方法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">def conv_html_pdf(html_path,pdf_path):</span><br><span class="line">    if not os.path.exists(pdf_path):</span><br><span class="line">        os.makedirs(pdf_path)</span><br><span class="line">    f_list = os.listdir(html_path)</span><br><span class="line">    for f in f_list:</span><br><span class="line">        if (not f[-5:]==&quot;.html&quot;) or (&quot;tmp&quot; in f): #不是html文件的不转换，含有tmp的不转换</span><br><span class="line">            continue</span><br><span class="line">        html_file_path = os.path.join(html_path,f)</span><br><span class="line">        html_tmp_file = html_file_path[:-5]+&quot;_tmp.html&quot; #生成临时文件，供转pdf用</span><br><span class="line">        html_str = read_file(html_file_path)</span><br><span class="line">        bs_html = BeautifulSoup(html_str,&quot;lxml&quot;)</span><br><span class="line">        pdf_title = &quot;&quot;</span><br><span class="line">        title_tag = bs_html.find(id=&quot;activity-name&quot;)</span><br><span class="line">        if title_tag is not None:</span><br><span class="line">            pdf_title = &quot;_&quot;+title_tag.get_text().replace(&quot; &quot;, &quot;&quot;).replace(&quot;  &quot;,&quot;&quot;).replace(&quot;\n&quot;,&quot;&quot;)</span><br><span class="line">        print(pdf_title)</span><br><span class="line">        r_idx = html_file_path.rindex(&quot;/&quot;) + 1</span><br><span class="line">        pdf_name = html_file_path[r_idx:-5]+pdf_title</span><br><span class="line">        pdf_file_path = os.path.join(pdf_path,pdf_name+&quot;.pdf&quot;)</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        加快转换速度，把临时文件中的不必要的元素去掉</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        [s.extract() for s in bs_html([&quot;script&quot;,&quot;iframe&quot;,&quot;link&quot;])]</span><br><span class="line">        save_file(html_tmp_file,str(bs_html))</span><br><span class="line">        call_wkhtmltopdf(html_tmp_file,pdf_file_path)</span><br></pre></td></tr></table></figure> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">def call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):</span><br><span class="line">    if skipExists and os.path.exists(pdf_file_path):</span><br><span class="line">        print(&quot;pdf_file_path already existed!&quot;)</span><br><span class="line">        if removehtml :</span><br><span class="line">            os.remove(html_file_path)</span><br><span class="line">        return</span><br><span class="line">    exe_path = cfg[&#x27;wkhtmltopdf&#x27;] #wkhtmltopdf.exe的保存路径</span><br><span class="line">    cmd_list = []</span><br><span class="line">    cmd_list.append(&quot; --load-error-handling ignore &quot;)</span><br><span class="line">    cmd_list.append(&quot; &quot;+ html_file_path +&quot; &quot;)</span><br><span class="line">    cmd_list.append(&quot; &quot;+ pdf_file_path +&quot; &quot;)</span><br><span class="line">    cmd_str = exe_path + &quot;&quot;.join(cmd_list)</span><br><span class="line">    print(cmd_str)</span><br><span class="line">    subprocess.check_call(cmd_str, shell=False)</span><br><span class="line">    if removehtml:</span><br><span class="line">        os.remove(html_file_path)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>11、定义读取保存各文件夹路径的配置文件的方法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def get_config():</span><br><span class="line">    cfg_file = read_file(&quot;config/wechat.cfg&quot;)</span><br><span class="line">    cfg_file = cfg_file.replace(&quot;\\\\&quot;,&quot;/&quot;).replace(&quot;\\&quot;,&quot;/&quot;) #防止json中有 / 导致无法识别</span><br><span class="line">    cfg_json = json.loads(cfg_file)</span><br><span class="line">    return cfg_json</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>【重要】配置文件放置在当前目录的子目录config下，名为wechat.cfg,内容如下</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;jsonDir&quot;: &quot;./download/wechat/fiddler-raw/Dump-0902-14-43-38/&quot;,</span><br><span class="line">    &quot;htmlDir&quot;: &quot;./download/wechat/html/&quot;,</span><br><span class="line">    &quot;pdfDir&quot;: &quot;./download/wechat/pdf/&quot;,</span><br><span class="line">    &quot;wkhtmltopdf&quot;: &quot;./wkhtmltopdf.exe&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>12、定义从秒数获得时间的方法（微信公众号的datetime存放的是从1970-01-01 00:00:00到发表时的秒数）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def seconds_to_time(seconds):</span><br><span class="line">    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数</span><br><span class="line">    other_style_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, taime_array)</span><br><span class="line">    date_time =datetime.strptime(other_style_time, &quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class="line">    return str(date_time).replace(&quot;-&quot;,&quot;&quot;).replace(&quot;:&quot;,&quot;&quot;).replace(&quot; &quot;,&quot;&quot;)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;<strong>13、定义主函数进行调用，没有参数或者参数是html则进行下载，如果是pdf则是html转换成pdf</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cfg = get_config() # 获得配置文件的全局变量</span><br><span class="line">#get_article_list(&quot;./tmp/&quot;) # for test</span><br><span class="line">#down_html(&quot;./tmp/&quot;,&quot;./html/&quot;)# for test</span><br><span class="line"> </span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line"> </span><br><span class="line">    if len(sys.argv) == 1:</span><br><span class="line">        arg = None</span><br><span class="line">    else:</span><br><span class="line">        arg = sys.argv[1]</span><br><span class="line">    if arg is None or arg == &quot;html&quot;:</span><br><span class="line">        down_html(cfg[&#x27;jsonDir&#x27;],cfg[&#x27;htmlDir&#x27;])</span><br><span class="line">    elif arg == &quot;pdf&quot;:</span><br><span class="line">        conv_html_pdf(cfg[&#x27;htmlDir&#x27;],cfg[&#x27;pdfDir&#x27;])</span><br></pre></td></tr></table></figure><h3 id="【运行效果】"><a href="#【运行效果】" class="headerlink" title="【运行效果】"></a><strong>【运行效果】</strong></h3><br><h3 id="【完整代码】"><a href="#【完整代码】" class="headerlink" title="【完整代码】"></a><strong>【完整代码】</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><span class="line"># _*_ coding:utf-8 _*_</span><br><span class="line">import os,sys</span><br><span class="line">import requests</span><br><span class="line">import json</span><br><span class="line">import subprocess</span><br><span class="line">import re</span><br><span class="line">import random</span><br><span class="line">import time</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">from datetime import datetime,timedelta</span><br><span class="line">from time import sleep</span><br><span class="line"> </span><br><span class="line">class ArticleInfo():</span><br><span class="line">    def __init__(self,url,title,idx_num,atc_datetime): #idx_num是为了方便保存图片命名</span><br><span class="line">        self.url = url</span><br><span class="line">        self.title = title</span><br><span class="line">        self.idx_num = idx_num</span><br><span class="line">        self.atc_datetime = atc_datetime</span><br><span class="line"> </span><br><span class="line">def read_file(file_path):</span><br><span class="line">    with open(file_path,&quot;r&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">        file_content = f.read()</span><br><span class="line">    return file_content</span><br><span class="line"> </span><br><span class="line">def save_file(file_path,file_content):</span><br><span class="line">    with open(file_path,&quot;w&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class="line">        f.write(file_content)</span><br><span class="line"> </span><br><span class="line">def get_html(url):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class="line">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class="line">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class="line">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class="line">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class="line">    if response.status_code == 200:</span><br><span class="line">        htmltxt = response.text #返回的网页正文</span><br><span class="line">        return htmltxt</span><br><span class="line">    else:</span><br><span class="line">        return None</span><br><span class="line"> </span><br><span class="line">def get_save_image(url,img_file_path):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class="line">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class="line">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class="line">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class="line">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class="line">    with open(img_file_path,&quot;wb&quot;) as f:</span><br><span class="line">        f.write(response.content)</span><br><span class="line"> </span><br><span class="line">def get_article_list(json_path):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    通过抓取的包的json文件，获取所有文章的信息的列表</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径</span><br><span class="line">    article_list = [] # 用来保存所有文章的列表</span><br><span class="line">    for file in file_list:</span><br><span class="line">        file_path = os.path.join(json_path,file)</span><br><span class="line">        file_cont = read_file(file_path)</span><br><span class="line">        json_cont = json.loads(file_cont)</span><br><span class="line">        general_msg_list = json_cont[&#x27;general_msg_list&#x27;]</span><br><span class="line">        json_list = json.loads(general_msg_list)</span><br><span class="line">        #print(json_list[&#x27;list&#x27;][0][&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;])</span><br><span class="line">        for lst in json_list[&#x27;list&#x27;]:</span><br><span class="line">            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名</span><br><span class="line">            seconds_datetime = lst[&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;]</span><br><span class="line">            atc_datetime = seconds_to_time(seconds_datetime)</span><br><span class="line">            if lst[&#x27;comm_msg_info&#x27;][&#x27;type&#x27;] == 49: # 49为普通的图文</span><br><span class="line">                atc_idx+=1</span><br><span class="line">                url = lst[&#x27;app_msg_ext_info&#x27;][&#x27;content_url&#x27;]</span><br><span class="line">                title = lst[&#x27;app_msg_ext_info&#x27;][&#x27;title&#x27;]</span><br><span class="line">                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class="line">                article_list.append(atc_info)</span><br><span class="line">            if 1 == lst[&#x27;app_msg_ext_info&#x27;][&#x27;is_multi&#x27;]: # 一次发多篇</span><br><span class="line">                multi_app_msg_item_list = lst[&#x27;app_msg_ext_info&#x27;][&#x27;multi_app_msg_item_list&#x27;]</span><br><span class="line">                for multi in multi_app_msg_item_list:</span><br><span class="line">                    atc_idx+=1</span><br><span class="line">                    url = multi[&#x27;content_url&#x27;]</span><br><span class="line">                    title = multi[&#x27;title&#x27;]</span><br><span class="line">                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class="line">                    article_list.append(mul_act_info)</span><br><span class="line">    return article_list</span><br><span class="line"> </span><br><span class="line">def chg_img_link(bs_html):</span><br><span class="line">    link_list = bs_html.findAll(&quot;link&quot;)</span><br><span class="line">    for link in link_list:</span><br><span class="line">        href = link.attrs[&quot;href&quot;]</span><br><span class="line">        if href.startswith(&quot;//&quot;):</span><br><span class="line">            new_href = &quot;http:&quot;+href</span><br><span class="line">            link.attrs[&quot;href&quot;]=new_href</span><br><span class="line"> </span><br><span class="line">def rep_image(org_html,local_img_path,html_name):</span><br><span class="line">    bs_html = BeautifulSoup(org_html,&quot;lxml&quot;)</span><br><span class="line">    img_list = bs_html.findAll(&quot;img&quot;)</span><br><span class="line">    img_idx = 0 # 计数和命名用</span><br><span class="line">    for img in img_list:</span><br><span class="line">        img_idx+=1</span><br><span class="line">        org_url = &quot;&quot; # 图片的真实地址</span><br><span class="line">        if &quot;data-src&quot; in img.attrs: # &lt;img  data-src=&quot;...&quot;</span><br><span class="line">            org_url = img.attrs[&#x27;data-src&#x27;]</span><br><span class="line">        elif &quot;src&quot; in img.attrs : # &lt;img  src=&quot;...&quot;</span><br><span class="line">            org_url = img.attrs[&#x27;src&#x27;]</span><br><span class="line">        if org_url.startswith(&quot;//&quot;):</span><br><span class="line">            org_url = &quot;http:&quot; + org_url</span><br><span class="line">        if len(org_url) &gt; 0 :</span><br><span class="line">            print(&quot;download image &quot;,img_idx)</span><br><span class="line">            if &quot;data-type&quot; in img.attrs:</span><br><span class="line">                img_type = img.attrs[&quot;data-type&quot;]</span><br><span class="line">            else:</span><br><span class="line">                img_type = &quot;png&quot;</span><br><span class="line">            img_name = html_name + &quot;_&quot; + str(img_idx) + &quot;.&quot; +img_type</span><br><span class="line">            img_file_path = os.path.join(local_img_path,img_name)</span><br><span class="line">            get_save_image(org_url,img_file_path) # 下载并保存图片</span><br><span class="line">            img.attrs[&quot;src&quot;] = &quot;images/&quot; + img_name</span><br><span class="line">        else:</span><br><span class="line">            img.attrs[&quot;src&quot;] = &quot;&quot;</span><br><span class="line">    chg_img_link(bs_html)</span><br><span class="line">    return str(bs_html)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">def down_html(json_path,html_path):</span><br><span class="line">    if not os.path.exists(html_path):</span><br><span class="line">        os.makedirs(html_path) # 创建保存html文件的文件夹</span><br><span class="line">    local_img_path = os.path.join(html_path,&quot;images&quot;)</span><br><span class="line">    if not os.path.lexists(local_img_path):</span><br><span class="line">        os.makedirs(local_img_path) # 创建保存本地图片的文件夹</span><br><span class="line">    article_list = get_article_list(json_path)</span><br><span class="line">    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列</span><br><span class="line">    tot_article = len(article_list) # 文章的总数量</span><br><span class="line">    i = 0 #计数用</span><br><span class="line">    for atc in article_list:</span><br><span class="line">        i+=1</span><br><span class="line">        atc_unique_name = str(atc.atc_datetime) + &quot;_&quot; + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识</span><br><span class="line">        html_name = atc_unique_name+&quot;.html&quot;</span><br><span class="line">        html_file_path = os.path.join(html_path,html_name)</span><br><span class="line">        print(i,&quot;of&quot;,tot_article,atc_unique_name,atc.title)</span><br><span class="line">        if os.path.exists(html_file_path): # 支持续传</span><br><span class="line">            print(&quot;&#123;&#125; existed already!&quot;.format(html_file_path))</span><br><span class="line">            continue</span><br><span class="line">        org_atc_html = get_html(atc.url)</span><br><span class="line">        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)</span><br><span class="line">        save_file(html_file_path,new_atc_html)</span><br><span class="line">        sleep(round(random.uniform(1,3),2))</span><br><span class="line">        &quot;&quot;&quot;for test</span><br><span class="line">        if i&gt;0 :</span><br><span class="line">            break</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line"> </span><br><span class="line">def conv_html_pdf(html_path,pdf_path):</span><br><span class="line">    if not os.path.exists(pdf_path):</span><br><span class="line">        os.makedirs(pdf_path)</span><br><span class="line">    f_list = os.listdir(html_path)</span><br><span class="line">    for f in f_list:</span><br><span class="line">        if (not f[-5:]==&quot;.html&quot;) or (&quot;tmp&quot; in f): #不是html文件的不转换，含有tmp的不转换</span><br><span class="line">            continue</span><br><span class="line">        html_file_path = os.path.join(html_path,f)</span><br><span class="line">        html_tmp_file = html_file_path[:-5]+&quot;_tmp.html&quot; #生成临时文件，供转pdf用</span><br><span class="line">        html_str = read_file(html_file_path)</span><br><span class="line">        bs_html = BeautifulSoup(html_str,&quot;lxml&quot;)</span><br><span class="line">        pdf_title = &quot;&quot;</span><br><span class="line">        title_tag = bs_html.find(id=&quot;activity-name&quot;)</span><br><span class="line">        if title_tag is not None:</span><br><span class="line">            pdf_title = &quot;_&quot;+title_tag.get_text().replace(&quot; &quot;, &quot;&quot;).replace(&quot;  &quot;,&quot;&quot;).replace(&quot;\n&quot;,&quot;&quot;)</span><br><span class="line">        print(pdf_title)</span><br><span class="line">        r_idx = html_file_path.rindex(&quot;/&quot;) + 1</span><br><span class="line">        pdf_name = html_file_path[r_idx:-5]+pdf_title</span><br><span class="line">        pdf_file_path = os.path.join(pdf_path,pdf_name+&quot;.pdf&quot;)</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        加快转换速度，把临时文件中的不必要的元素去掉</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        [s.extract() for s in bs_html([&quot;script&quot;,&quot;iframe&quot;,&quot;link&quot;])]</span><br><span class="line">        save_file(html_tmp_file,str(bs_html))</span><br><span class="line">        call_wkhtmltopdf(html_tmp_file,pdf_file_path)</span><br><span class="line"> </span><br><span class="line">def call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):</span><br><span class="line">    if skipExists and os.path.exists(pdf_file_path):</span><br><span class="line">        print(&quot;pdf_file_path already existed!&quot;)</span><br><span class="line">        if removehtml :</span><br><span class="line">            os.remove(html_file_path)</span><br><span class="line">        return</span><br><span class="line">    exe_path = cfg[&#x27;wkhtmltopdf&#x27;] #wkhtmltopdf.exe的保存路径</span><br><span class="line">    cmd_list = []</span><br><span class="line">    cmd_list.append(&quot; --load-error-handling ignore &quot;)</span><br><span class="line">    cmd_list.append(&quot; &quot;+ html_file_path +&quot; &quot;)</span><br><span class="line">    cmd_list.append(&quot; &quot;+ pdf_file_path +&quot; &quot;)</span><br><span class="line">    cmd_str = exe_path + &quot;&quot;.join(cmd_list)</span><br><span class="line">    print(cmd_str)</span><br><span class="line">    subprocess.check_call(cmd_str, shell=False)</span><br><span class="line">    if removehtml:</span><br><span class="line">        os.remove(html_file_path)</span><br><span class="line"> </span><br><span class="line">def get_config():</span><br><span class="line">    cfg_file = read_file(&quot;config/wechat.cfg&quot;)</span><br><span class="line">    cfg_file = cfg_file.replace(&quot;\\\\&quot;,&quot;/&quot;).replace(&quot;\\&quot;,&quot;/&quot;) #防止json中有 / 导致无法识别</span><br><span class="line">    cfg_json = json.loads(cfg_file)</span><br><span class="line">    return cfg_json</span><br><span class="line"> </span><br><span class="line">def seconds_to_time(seconds):</span><br><span class="line">    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数</span><br><span class="line">    other_style_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, taime_array)</span><br><span class="line">    date_time =datetime.strptime(other_style_time, &quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class="line">    return str(date_time).replace(&quot;-&quot;,&quot;&quot;).replace(&quot;:&quot;,&quot;&quot;).replace(&quot; &quot;,&quot;&quot;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">cfg = get_config() # 获得配置文件的全局变量</span><br><span class="line">#get_article_list(&quot;./tmp/&quot;) # for test</span><br><span class="line">#down_html(&quot;./tmp/&quot;,&quot;./html/&quot;)# for test</span><br><span class="line"> </span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line"> </span><br><span class="line">    if len(sys.argv) == 1:</span><br><span class="line">        arg = None</span><br><span class="line">    else:</span><br><span class="line">        arg = sys.argv[1]</span><br><span class="line">    if arg is None or arg == &quot;html&quot;:</span><br><span class="line">        down_html(cfg[&#x27;jsonDir&#x27;],cfg[&#x27;htmlDir&#x27;])</span><br><span class="line">    elif arg == &quot;pdf&quot;:</span><br><span class="line">        conv_html_pdf(cfg[&#x27;htmlDir&#x27;],cfg[&#x27;pdfDir&#x27;])</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;【老博客地址】&quot;&gt;&lt;a href=&quot;#【老博客地址】&quot; class=&quot;headerlink&quot; title=&quot;【老博客地址】&quot;&gt;&lt;/a&gt;&lt;strong&gt;【老博客地址】&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&amp;emsp;&amp;emsp;&lt;a href=&quot;https://blog</summary>
      
    
    
    
    <category term="技术" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="实践" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%8A%80%E6%9C%AF/%E5%AE%9E%E8%B7%B5/"/>
    
    <category term="python" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%8A%80%E6%9C%AF/%E5%AE%9E%E8%B7%B5/python/"/>
    
    <category term="兴趣研究" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%85%B4%E8%B6%A3%E7%A0%94%E7%A9%B6/"/>
    
    <category term="技术" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%85%B4%E8%B6%A3%E7%A0%94%E7%A9%B6/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="爬虫" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%85%B4%E8%B6%A3%E7%A0%94%E7%A9%B6/%E6%8A%80%E6%9C%AF/%E7%88%AC%E8%99%AB/"/>
    
    
    <category term="技术" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="python" scheme="https://unclevicky.github.io/rabbitBear/tags/python/"/>
    
    <category term="爬虫" scheme="https://unclevicky.github.io/rabbitBear/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="公众号" scheme="https://unclevicky.github.io/rabbitBear/tags/%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>工程清单（持续更新）</title>
    <link href="https://unclevicky.github.io/rabbitBear/2022/07/07/%E5%B7%A5%E7%A8%8B%E6%B8%85%E5%8D%95%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89/"/>
    <id>https://unclevicky.github.io/rabbitBear/2022/07/07/%E5%B7%A5%E7%A8%8B%E6%B8%85%E5%8D%95%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89/</id>
    <published>2022-07-07T10:49:35.000Z</published>
    <updated>2022-07-08T01:43:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="【背景】"><a href="#【背景】" class="headerlink" title="【背景】"></a><strong>【背景】</strong></h2><p style="text-indent:2em">从小就兴趣广泛，妄想什么都会。诗词歌赋、琴棋书画、天文地理、博古通今……从很多年前开始，就开始给自己挖坑了，但都是懒散的片段，经过这么多年的积累，期待自己把这些整理成册，系统性的总结和沉淀……</p><h3 id="工程清单"><a href="#工程清单" class="headerlink" title="工程清单"></a><strong>工程清单</strong><p></p></h3><ol start="0"><li><h2 id="文艺创作-文学"><a href="#文艺创作-文学" class="headerlink" title="文艺创作 - 文学"></a>文艺创作<br> - 文学</h2></li><li><p>博古通今</p><ul><li>历史<ul><li>中国历史</li><li>世界通史</li></ul></li><li>周易<ul><li>术数学</li></ul></li></ul></li><li><p>业务</p><ul><li>整体<ul><li>金融体系</li><li>全面风险管理</li></ul></li><li><h2 id="资管-投研"><a href="#资管-投研" class="headerlink" title="资管  - 投研"></a>资管<br>  - 投研</h2></li><li>银行<ul><li>信贷</li></ul></li></ul></li><li><p>方案和架构</p><ul><li>架构<ul><li>业务架构</li><li>技术架构</li><li>数据架构</li></ul></li><li>资管方案<ul><li>整体蓝图</li><li>数据中台</li><li>投研<ul><li>FOF</li><li>投前研究</li><li>投后管理</li><li>风险控制</li></ul></li></ul></li></ul></li><li><p>方法论</p><ul><li>咨询</li><li>管理</li></ul></li><li><p>兴趣研究</p><ul><li>量化投资<ul><li>abu</li></ul></li><li>爬虫</li><li>人工智能</li><li>机器学习</li><li>操作系统DIY</li><li>三国杀<ul><li>noname</li><li>太阳神</li></ul></li></ul></li><li><p>笔记</p><ul><li>书籍</li><li>影评</li><li>教程</li><li>科普</li></ul></li><li><h2 id="感悟"><a href="#感悟" class="headerlink" title="感悟"></a>感悟</h2></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;【背景】&quot;&gt;&lt;a href=&quot;#【背景】&quot; class=&quot;headerlink&quot; title=&quot;【背景】&quot;&gt;&lt;/a&gt;&lt;strong&gt;【背景】&lt;/strong&gt;&lt;/h2&gt;&lt;p style=&quot;text-indent:2em&quot;&gt;
从小就兴趣广泛，妄想什么都会。诗词歌赋、</summary>
      
    
    
    
    <category term="总览" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%80%BB%E8%A7%88/"/>
    
    <category term="目录" scheme="https://unclevicky.github.io/rabbitBear/categories/%E6%80%BB%E8%A7%88/%E7%9B%AE%E5%BD%95/"/>
    
    
    <category term="工程清单" scheme="https://unclevicky.github.io/rabbitBear/tags/%E5%B7%A5%E7%A8%8B%E6%B8%85%E5%8D%95/"/>
    
    <category term="目录" scheme="https://unclevicky.github.io/rabbitBear/tags/%E7%9B%AE%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>【自我进化1到2】01.关系中的自我</title>
    <link href="https://unclevicky.github.io/rabbitBear/2021/03/04/%E4%B8%AA%E4%BA%BA%E8%BF%9B%E5%8C%96%E8%AE%BA01/"/>
    <id>https://unclevicky.github.io/rabbitBear/2021/03/04/%E4%B8%AA%E4%BA%BA%E8%BF%9B%E5%8C%96%E8%AE%BA01/</id>
    <published>2021-03-03T16:00:00.000Z</published>
    <updated>2021-03-05T03:02:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><font color="grey"><font size="2"><em>这一系列是基于陈海贤老师的自我进化课，用以自我剖析</em> </font></font></p><p>兔子曾经引以为傲的，是自己的时间管理方法———按分钟计算的，每30min看一下学习状态并及时调整，它帮助兔子一年内一次性7分过雅思，过CPA和CPV考试，写过实证，到过实习，玩过比赛。  </p><p>凭借这种打满鸡血的精神状态，我度过了充实圆满的2018、19和20年的大部分时间，直到2020年下半叶，遇到大熊，我的精神节奏被打乱了。  </p><p>自控力越来越差，开始频繁发脾气，出问题总想躲避，逃避沟通，对认识新朋友也失去了积极性。  </p><p>和大熊认识起初，我拥有独立自由的生活，除了爸妈，我无需向任何人汇报。但随着亲密关系的建立，情感依赖迅速膨胀，我惧怕了。<u><strong>除了抢占我的时间、空间，它把脆弱年少不完整的自我真实地暴露出来，在我和他面前彰显无遗。望着镜子中的自己，我已记不清对他说了多少次，“这不是我。”</strong> </u> </p><p>我用了很久分析原因，一方面是客观因素，工作不稳定，另一方面也是我苦苦想寻求解决的——<strong>并未建立稳定的自我</strong>。  </p><p><u><strong>没有建立对自我身份的认同，当那些脆弱的部分通过亲密关系，被强行整合进自我概念里，我变得异常排斥，很难接纳自己，“这不是我”。</strong> </u> </p><p>所以，我试图探索，“我到底是怎样的”。</p><p>开篇说一个词，“关系“。  </p><h4 id="一、自我处在关系中"><a href="#一、自我处在关系中" class="headerlink" title="一、自我处在关系中"></a><center>一、自我处在关系中</center></h4><p>人无时无刻不处在关系中。</p><p>在每一段关系里面，自我是不同的。</p><p>大熊说，刚认识我的时候，我每天都笑的很阳光，但后来感觉就没那么积极了。所以我曾质疑，自己是不是变了。</p><p>陈海贤老师讲了个故事，在孩子没做完作业的时候，妈妈会大声责备说，你怎么这么不听话！突然电话铃响了，妈妈接起电话，满脸笑容说，“哦，是老师啊，您说来家访，好啊好啊……”。</p><p>曾经，我会把故事理解为“真实自我”和“虚假自我”的差异，但不是的。<strong>从关系的视角来看，它反映的是妈妈在“亲近”和“疏远”这两种不同关系中的差异，妈妈的行为都是真实的自我。所以说，并非个性，而是所处的关系，决定了你的想法和行为。</strong></p><p>从关系的视角思考，会让很多看似无解的问题有了答案。比如说，我对坚持学法语有拖延症，我就进行了如下的剖析。  </p><p><font color="grey"><b>R：学法语有拖延症，怎么办？<br>A：为什么这么想<br>R：在学法语法语的时候，觉得记单词很难，经常不想去学。<br>A：难在哪里呢？如果学的不好，谁会评价你呢？<br>R：是我爷爷Peter。我担心Peter听到我退步的法语，会感到失望。</b></font></p><p>到这里，从关系的视角，拖延症就不只是我个人的问题了，而是我和爷爷关系的产物。</p><h4 id="二、关系的视角拓展改变的空间"><a href="#二、关系的视角拓展改变的空间" class="headerlink" title="二、关系的视角拓展改变的空间"></a><center>二、关系的视角拓展改变的空间</center></h4><p><strong>妨碍改变的，是头脑中那个顽固的“自我概念”。</strong></p><p>大熊在和我对话过程中发现，我习惯性使用过多“你应该……“。我给自己贴上类似“自信”“努力”的个性标签，同时指责别人为什么会有这样那样古怪的个性。  </p><p><strong>在与人的交往中，我抽象出“自我”，也就是头脑中根深蒂固的那个模样，它不会变，始终积极向上。这些条条框框帮助我增加了人生控制感，但也塑造了僵固型思维，即</strong></p><p><u><strong>“我不能暴露我的脆弱，给那个夸奖我的人，以免让他失望。”</strong></u></p><p>现在想来，每段关系中的自我都是不一样的，如果喜欢探索和改变的人，为何不选择在不同的关系中发现不一样的自己呢。不再给自己贴上标签，而是去审视具体是什么样的关系，导致了现在的行为。也不指责别人的性格，而是理解什么样的关系，让他表现出这样的行为。</p><p>比如，上文说到，我和爷爷的关系导致了我对法语学习缺乏积极性。在这段关系里，既然并非我个性问题，那可以寻求可以让自己表现更好的关系，发现不一样的自己，比如说，认识学法语的新朋友们。</p><p>摆脱根深蒂固，把每个自我放到具体的关系中，从每一段关系，看自我的表现，会成长很多。</p><h4 id="尾"><a href="#尾" class="headerlink" title="尾"></a><center>尾</center></h4><p>从个体视角到关系视角，只要做出转变，便不再是那个贴着永久标签的自己。而亲密感的建立，是自我发展的路上一个重要里程碑。</p><p>所以，有时感觉很幸运。论朋友，某种程度上，我和大熊志同道合，心中有所想，定有所为。也愿这种深层次的照顾，可以深化双方的自我身份认同，帮助彼此更能接纳自己，变得更完整。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;font color=&quot;grey&quot;&gt;&lt;font size=&quot;2&quot;&gt;&lt;em&gt;这一系列是基于陈海贤老师的自我进化课，用以自我剖析&lt;/em&gt; &lt;/font&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;兔子曾经引以为傲的，是自己的时间管理方法———按分钟计算的，每30min看一下学习状态并及时</summary>
      
    
    
    
    <category term="个人进化" scheme="https://unclevicky.github.io/rabbitBear/categories/%E4%B8%AA%E4%BA%BA%E8%BF%9B%E5%8C%96/"/>
    
    <category term="心理学" scheme="https://unclevicky.github.io/rabbitBear/categories/%E4%B8%AA%E4%BA%BA%E8%BF%9B%E5%8C%96/%E5%BF%83%E7%90%86%E5%AD%A6/"/>
    
    
    <category term="听陈海贤自我进化课" scheme="https://unclevicky.github.io/rabbitBear/tags/%E5%90%AC%E9%99%88%E6%B5%B7%E8%B4%A4%E8%87%AA%E6%88%91%E8%BF%9B%E5%8C%96%E8%AF%BE/"/>
    
  </entry>
  
  <entry>
    <title>兔子和大熊聊《资治通鉴》（导读）</title>
    <link href="https://unclevicky.github.io/rabbitBear/2021/02/17/preparation/"/>
    <id>https://unclevicky.github.io/rabbitBear/2021/02/17/preparation/</id>
    <published>2021-02-17T12:56:43.000Z</published>
    <updated>2021-02-17T13:31:32.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="创作背景"><a href="#创作背景" class="headerlink" title="创作背景"></a><strong>创作背景</strong><p></p></h3><p>春节期间，兔子在读《资治通鉴》，看到书里的语言，备受鼓舞，想着在互联网平台上和大家分享这本书里的新知。和大熊说罢，我们一拍即合，将把对《资治通鉴》的解读分为众多系列，以双人音频的方式放在喜马拉雅上。</p><br>以下为第一部分——导读。<p></p><h3 id="导读"><a href="#导读" class="headerlink" title="导读"></a><strong>导读</strong><p></p></h3><p>大熊&#x2F;兔子：读史明智、鉴往知来。我是兔子&#x2F;大熊。</p><br>大熊：欢迎大家来到兔子和大熊讲《资治通鉴》，以后的节目将由我们俩为大家解读《资治通鉴》这本书里的干货。<p></p><br>兔子：那大熊老师，我们今天和大家聊点什么呢？<p></p><br>大熊：由于今天是我们第一节课，那我们就从这本书的背景干货开始聊起。整本书，一共294卷，上可以追溯到战国初期韩赵魏三家分晋，下至宋太祖赵匡胤建国前夕，囊括了周秦两汉、魏晋南北朝、隋唐五代各朝的历史，整个时间跨度有1362年。<p></p><br>兔子：整本书的正文有三百多万字，司马光参考了三百多部著作，用了19年的时间才完成。<p></p><br>大熊：没错，那司马光为什么要写这本书呢？你觉得有哪些原因？<p></p><br>兔子：嗯，我们都知道“司马光砸缸”的故事，所以我想这么聪明的孩子，写书是他表达自己思想的一种途径，或者说是出于自身的喜好吧。<p></p><br>大熊：没错没错，我们都知道”砸缸“那个故事，其实司马光编撰这本书，一方面是出自自己的喜好和责任感，另一方面也和当时的政治环境有关。我们知道，北宋前期，提倡文治教化，鼓励大家多去总结历史经验和得失，所以在当时有很多学者都在做一件事，就是翻腾之前的史料，进行总结。<p></p><br>兔子：那这样说的话司马光写这本书，可以说是“奉敕”编撰的。所以在司马光和他的团队完成书稿，拿给皇帝看时，当时的皇帝宋神宗认为，这本书鉴于往事，有资于治道，故赐名《资治通鉴》。<p></p><br>大熊：没错，也正因为司马光的惊世情怀，才使得《资治通鉴》这本书得以经世致用。书里的内容是按照时间顺序编撰的，挑选了政治上和军事上的重要的人物、重要的事件。最精彩的地方是，在这每一部分之后，作者都有自己一段盖棺定论的评价，以提供给读者们借鉴。<p></p><br>兔子：所以这本书里可以看到故事、也可看到评述的语言，近代学者曾国藩在向众人推举这本书时，说这是经世治国最好的书。因为它不光讲道理，还通晓权利变更，还讲了如何操作，可谓是精彩纷呈。<p></p><br>大熊：没错，《资治通鉴》得到了后世学者和帝王的交口称誉，作为一本史书，它的价值可以从两方面去评价：一个是史料的价值，一个是史著的价值。作为历史材料，《资治通鉴》中隋唐五代的部分，是很难得的历史记载；同样，作为一部史学巨著，它也具有不可替代的阅读鉴赏价值。<p></p><br>兔子：司马光在编撰的时候参考了300多部著作，还特地又写了另外一本书，叫《考异》，记载从哪里搜罗来的史料，并进行考订。这才是学术研究的初心啊，讲求史料真实。<p></p><br>大熊：所以这本书，真的是非常值得我们仔细去品味。<p></p><br>兔子：大熊，你读《资治通鉴》，收获了哪些呢？<p></p><br>大熊：借用某先贤的一句话，读资治通鉴“可以自淑，可以诲人，可以知道而乐“。自淑就是提升自己，诲人就是可以和人分享，知道而乐就是知道为人之道、处世之道，感到很愉快，很快乐。我想，这也是我们大多数人读《资治通鉴》的宗旨吧。<p></p><br>兔子：没错，前段时间我有把《资治通鉴》的一些读后感发布到我的公众号上，有朋友和我留言说，古人就已想到了现代人遇到的问题的解决之路，真是智慧。所以我会感到，别人从我我分享的东西里获取新知，真是十分幸福的事情。<p></p><br>大熊：当然啦，历史是具体的，但道理是抽象的，所以对待很多历史事件和人物，不同人的看法也不同。也欢迎大家在以后的节目里可以发表自己的想法，我们可以一同讨论、共同进步。<p></p><br>兔子：大熊和兔子都是国学迷，也非常想通过分享对《资治通鉴》的个人解读，认识更多关注国学经典的你们。记得点击音频右方的“免费订阅”哦，我们下期节目见。<p></p><br>大熊：下期节目见。<p></p>  <p></p><p><a href="http://xima.tv/g4nS16?_sonic=0">导读音频-喜马拉雅主页</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;创作背景&quot;&gt;&lt;a href=&quot;#创作背景&quot; class=&quot;headerlink&quot; title=&quot;创作背景&quot;&gt;&lt;/a&gt;&lt;strong&gt;创作背景&lt;/strong&gt;&lt;p&gt;&lt;/p&gt;&lt;/h3&gt;&lt;p&gt;春节期间，兔子在读《资治通鉴》，看到书里的语言，备受鼓舞，想着在互联网平台上</summary>
      
    
    
    
    <category term="历史" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%8E%86%E5%8F%B2/"/>
    
    <category term="中国史" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%8E%86%E5%8F%B2/%E4%B8%AD%E5%9B%BD%E5%8F%B2/"/>
    
    
    <category term="资治通鉴" scheme="https://unclevicky.github.io/rabbitBear/tags/%E8%B5%84%E6%B2%BB%E9%80%9A%E9%89%B4/"/>
    
  </entry>
  
  <entry>
    <title>hexo博客基础环境搭建（非常详细）</title>
    <link href="https://unclevicky.github.io/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>https://unclevicky.github.io/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</id>
    <published>2021-02-07T02:36:33.000Z</published>
    <updated>2021-02-07T09:42:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="【背景】"><a href="#【背景】" class="headerlink" title="【背景】"></a><strong>【背景】</strong></h2><p style="text-indent:2em">我是一名学财务的文科生，没有任何计算机基础，但是喜欢写文章，之前都是在微信公众号上写，但是有诸多限制，于是萌生了想搭建一个自己的博客的念头。我把我的想法告诉了我的一个朋友（姑且称他为X君吧），X君帮我搭建了一个网站，并把过程写了一个简单的教程并讲给我听。我根据X君的教程和讲解，自己也把环境搭建起来了。在这里做一个记录。算是在新博客网站中的第一篇文章吧。</p><h2 id="【目标】"><a href="#【目标】" class="headerlink" title="【目标】"></a><strong>【目标】</strong></h2><ol><li>使用nodejs的hexo搭建本地博客系统</li><li>使用git进行版本管理（和小伙伴们协同工作的必备良兔（tool））</li><li>使用github进行代码托管（X君告诉我自己写的东西可以上传到这个网站，可以当作一个本地的备份，也可以随时随地工作，但是要注意隐私问题）</li><li>使用github Page作为博客网站的访问（X君说这是一个免费的个人网页托管服务器，不是很懂，反正就是能通过他自定义并在公网上访问自己的文章）</li></ol><h2 id="【小白科普】"><a href="#【小白科普】" class="headerlink" title="【小白科普】"></a><strong>【小白科普】</strong></h2><ol><li><strong>运行环境</strong><ul><li>任何软件的运行都需要环境，比如win10需要在笔记本电脑上运行，andriod需要在手机上运行；笔记本电脑和手机就是win10和android这俩软件的运行环境。</li><li>操作系统是一个特殊的软件，他们为其他软件的运行提供环境，比如QQ、微信都需要安装在win10、ios或android操作系统上才能运行，只不过他们要求的格式不一样，win10可以运行exe软件，ios可以运行dmg文件，andriod运行pkg文件等。</li><li>针对那些没有可视化交互界面的软件，操作系统会给他们提供一个特殊的运行环境。比如win10的cmd运行环境，mac的bash环境，androi也有只不过我们在手机上不常用。（不太好理解，但是可以类比win10需要笔记本电脑提供环境，QQ需要win10操作系统提供环境，python等没有界面的软件需要cmd提供环境一样类比着理解）。</li><li>python、nodejs、mysql等这些都是没有可视化交互界面的软件，所以需要我们在cmd或者bash中运行（X君说python和nodejs也有图形交互界面，但是为了让我更好的理解这些概念，所以就不推荐我使用）。</li></ul></li><li><strong>环境变量</strong><ul><li>上面提到了运行环境，但是我按X君的教程搭建环境的时候，经常<strong>提示某某文件后文件夹找不见</strong>，于是X君又给我普及了<strong>环境变量</strong>的概念。</li><li>当我们使用cmd或bash运行一个软件时，会以以下顺序执行：<ul><li>首先会在<strong>当前目录</strong>中寻找是否有该软件（例如python.exe）；</li><li>如果没有则会在<strong>当前用户的PATH环境变量指定的所有目录中按先后顺序循环寻找</strong>，如果找到了就直接运行，不再往下找。这个PATH就是一个环境变量（可以理解为一个字符串），存放了一堆的文件夹目录，win10是以“;”隔开，mac是以“：”隔开，大概长下面这个样子。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/abbywalker/opt/anaconda3/bin:/Users/abbywalker/opt/anaconda3/condabin:/Library/Frameworks/Python.framework/Versions/3.8/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/mysql/bin</span><br></pre></td></tr></table></figure></li><li>如果还没有则会继续在<strong>系统的PATH环境变量指定的所有目录中按先后顺序循环寻找</strong></li><li>如果还是找不到，就会报错<strong>提示某某文件后文件夹找不见</strong></li></ul></li></ul></li><li><strong>运行软件的5个方法</strong><ul><li>根据上面环境变量的介绍，运行软件可以有5种方法</li><li>直接到该软件的安装目录下运行 （对应于环境变量中的<strong>当前目录</strong>）</li><li>把该软件的安装目录加入到<strong>该用户的PATH变量</strong>中（具体方法后面讲）</li><li>在当前运行的cmd或bash中临时指定，而不影响其他的程序运行（X君建议使用这种方法，这样可以同一个电脑安装多版本的软件，比如同时安装python2.7和3.7，通过这种方法临时指定当前运行的环境而不影响其他程序）（具体方法后面讲）</li><li>把该软件的安装目录加入到<strong>系统的PATH变量</strong>中（具体方法后面讲）</li><li>直接指定该软件安装目录的绝对路径进行执行，例如:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;/usr/local/mysql/bin/python <span class="comment">#mac的bash环境</span></span><br><span class="line">&gt;d:\soft\pytthon\python.exe <span class="comment">#win10的cmd环境</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><p style="text-indent:2em"><b>好了，小白科普到此结束，下面进入本文正题。</b></p><h2 id="【环境准备】"><a href="#【环境准备】" class="headerlink" title="【环境准备】"></a><strong>【环境准备】</strong></h2><ol><li>安装git</li><li>安装nodejs</li><li>安装hexo</li><li>github搭建源文件个人仓库</li><li><strong>github设置多Page</strong>（默认一个账户只能有一个主页Page）</li><li>生产SSH并添加到github</li><li>将hexo发布到github</li><li>页面访问（本地预览和公网访问）</li></ol><p style="text-indent:2em">PS：X君用的是windows，我用的是mac所以教程会写两份。</p><h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a><strong>安装git</strong></h3><ol><li>windows的比较简单，直接下载软件，一路下一步即可；</li><li>mac上安装稍微复杂一点，安装过程记录以下；<ul><li>百度搜索 mac git安装，会提示到 <a href="https://git-scm.com/download/mac">git-scm</a>去安装</li><li>页面是英文的，按第一个教程，先安装<strong>homebrew</strong>,按照homebrew官网的提示，第一种方法直接安装,<code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</code>需要翻墙 <strong>【失败】</strong>，按官网第二种方法，先下载下来，然后解压，会报错，好不容易解压出来了，运行依然会报错。<strong>【失败】</strong>。<strong>建议大家不要按这个方法安装，当然有兴趣的可以自己尝试。</strong></li><li>鉴于<strong>homebrew</strong>的教训，所以<strong>XCode</strong>的方式，我也没有尝试。</li><li>直接使用第三种方式，<strong>Binary installer</strong>，下载sourceforge编译好的安装包，虽然不是最新版，但是不影响咱们的使用。<strong>直接下载zip文件，解压出dmg文件，安装即可。</strong></li></ul></li></ol><h3 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a><strong>安装nodejs</strong></h3><ol><li>windows和mac上都比较简单，直接下载软件，一路下一步即可；</li></ol><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a><strong>安装hexo</strong></h3><p>&ensp;&ensp;&ensp;&ensp;<strong>windows和mac是一样的</strong></p><ol><li><strong>在nodejs环境中（cmd或者bash）安装hexo包</strong>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li><li><strong>测试hexo是否成功</strong><ul><li>初始化<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init myBlog</span><br></pre></td></tr></table></figure></li><li>安装基础环境包 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> myBlog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure></li></ul></li></ol><p style="text-indent:2em">执行成功后，myBlog文件夹的结构如下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">myBlog</span><br><span class="line">├── _config.yml <span class="comment"># 网站的配置信息，您可以在此配置大部分的参数。 </span></span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds <span class="comment"># 模版文件夹</span></span><br><span class="line">├── <span class="built_in">source</span>  <span class="comment"># 资源文件夹，除 _posts 文件，其他以下划线_开头的文件或者文件夹不会被编译打包到public文件夹</span></span><br><span class="line">|   ├── _drafts <span class="comment"># 草稿文件</span></span><br><span class="line">|   └── _posts <span class="comment"># 文章Markdowm文件 </span></span><br><span class="line">└── themes  <span class="comment"># 主题文件夹</span></span><br></pre></td></tr></table></figure><ul><li>本地启动hexo服务器进行测试  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>&ensp;&ensp;&ensp;&ensp;在浏览器中输入<strong><a href="http://localhost:4000/">http://localhost:4000</a></strong>，如果看到如下效果，则证明hexo环境搭建成功:<img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/hexo-hello.png" class title="初始化"></li></ul><h3 id="github搭建个人源码仓库"><a href="#github搭建个人源码仓库" class="headerlink" title="github搭建个人源码仓库"></a><strong>github搭建个人源码仓库</strong></h3><p style="text-indent:2em">   <font color="red">     根据X君的建议，为了保证隐私安全和版权，自己写的博客的<b>源文件</b>单独保存在一个github仓库里，供自己使用；把hexo编译后的<b>发布版本</b>保存在另外一个github仓库里,通过github Page供大家访问。   </font></p><ol><li>注册github（略）。</li><li>登录github（略）</li><li>新建个人仓库 <strong>（建议私人库）</strong><img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new.png" class title="点击新建按钮"><img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new_config.png" class title="填入相关信息"></li><li>导出个人仓库<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/unclevicky/myBlogSrc.git .</span><br></pre></td></tr></table></figure></li><li>把刚建立的<strong>myBlog文件下的所有内容</strong>放到刚导出的github目录，然后再提交<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;第一次提交我的blog&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure></li></ol><h3 id="github设置多Page"><a href="#github设置多Page" class="headerlink" title="github设置多Page"></a><strong>github设置多Page</strong></h3><ol><li><p><font color="red">直接使用github个人主页</font></p><ul><li>一个github主页只能有一个个人主页</li><li>新建一个<strong>与账户同名的xxxx.github.io</strong> (xxxx是你自己的账户名，X君的是unclevicky.github.io)</li><li><strong>记录下这个特殊仓库的git地址供后面使用</strong>,<a href="https://github.com/unclevicky/unclevicky.github.io.git">https://github.com/unclevicky/unclevicky.github.io.git</a></li></ul></li><li><p><font color="red"><b>利用每个项目的GitHub Pages实现多主页访问</b></font></p><ul><li>新建一个仓库项目，方法同上<img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new.png" class title="点击新建按钮"></li><li>输入项目名称等信息(建议公开项目,不公开也行其实)，截图里用的名字是”myBlogPub”，写教程的时候已经改成了”rabbitBear”。可根据需要自己修改。<img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new_pub.png" class title="填入相关信息"></li><li>在github中配置页面，向下滚动<b>设置项目GitHub Pages信息</b><img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_setting.png" class title="设置GitHub Pages"><img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_pub_page.png" class title="设置GitHub Pages"></li><li>记住两个地址<ul><li><strong>记住项目仓库的地址，后面配置hexo发布时使用</strong>,<a href="https://github.com/unclevicky/rabbitBear.git">https://github.com/unclevicky/rabbitBear.git</a></li><li><strong>记住项目Github Page地址，后面访问博客时使用</strong>,<a href="https://unclevicky.github.io/rabbitBear/">https://unclevicky.github.io/rabbitBear/</a></li></ul></li></ul></li></ol><h3 id="生产SSH并添加到github"><a href="#生产SSH并添加到github" class="headerlink" title="生产SSH并添加到github"></a><strong>生产SSH并添加到github</strong></h3><ol><li><p>配置一个SSH绑定到github，SSH一个是私钥，一个是公钥，私钥保存到个人本地（千万别泄露），公钥配置到github上。（不太懂，反正类似我党当年在小黑板上登一个报纸-公钥，每个人拿自己的暗号-私钥，去破解想要的信息一样。同一份报纸，每个人私钥不同，获取的情报也不同一样。姑且这理解吧）。</p></li><li><p>回到本地的git环境,设置github用户的全局用户和邮箱，如果已设置可以忽略。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用以下语句检测是否设置，如果返回为空，则证明未设置</span></span><br><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果没设置，则使用下面两句话设置即可</span></span><br><span class="line">git config --global user.name <span class="string">&quot;yourname&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>然后创建SSH,使用以下语句，然后一路回车</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># windows的话使用cmd环境,xxxx是你的windows用户</span></span><br><span class="line"><span class="built_in">cd</span> c:/users/xxxx/.ssh/ </span><br><span class="line"><span class="comment"># mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录</span></span><br><span class="line"><span class="comment"># cd $HOME/.ssh/</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure><img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/git_ssh.png" class title="SSH秘钥截图"></li><li><p>将SSH的公钥，绑定到github上。</p><ul><li>打开上面的<strong>id_rsa.pub</strong>文件，把所有的内容拷贝下来</li><li>粘贴到github的SSH里面<img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh.png" class title="用户配置页面截图"><img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh_new.png" class title="SSH配置页面截图"><img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh_newdetail.png" class title="新建配置截图"></li></ul></li><li><p>在本地cmd或bash环境测试秘钥是否成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># windows的话使用cmd环境,xxxx是你的windows用户</span></span><br><span class="line"><span class="built_in">cd</span> c:/users/xxxx/.ssh/ </span><br><span class="line"><span class="comment"># mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录</span></span><br><span class="line"><span class="comment"># cd $HOME/.ssh/</span></span><br><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>如果，显示<code>Hi unclevicky! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code>,说明成功了。</p><img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/ssh_suc.png" class title="SSH配置成功截图"></li><li><p><strong>不成功的可能原因</strong></p><ul><li>如果不成功，加入-v参数，则使用以下命令，查看失败原因<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T -v git@github.com </span><br></pre></td></tr></table></figure></li><li>X君第一次也失败，使用-v查看调试信息之后发现，是找不到秘钥。这个问题，是绝对路径和相对路径造成的，所以在.ssh的目录下，新建一个<strong>config</strong>的文件，制定秘钥的绝对路径即可:<img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/git_ssh.png" class title="SSH秘钥截图"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">User xxxx@xx.com <span class="comment"># 你的邮箱地址</span></span><br><span class="line">Hostname ssh.github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile C:\\Users\\xxxx\\.ssh\\id_rsa <span class="comment"># 你的私钥的保存路径和名字</span></span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="将hexo发布到github"><a href="#将hexo发布到github" class="headerlink" title="将hexo发布到github"></a><strong>将hexo发布到github</strong></h3><ol><li>hexo本地环境测试【√】；github Page完成【√】；ssh配置完成【√】。剩下就是修改hexo的配置文件，然后发布到github page上，即可访问。</li><li>修改hexo博客目录的配置文件**_config.yml**,找到 <strong>“url:”</strong> 和 <strong>“deploy:”</strong><p style="text-indent:2em"><font color="red"><b>特殊说明：<ul><li>如果github使用的“直接使用github个人主页”方法，根据上面让记住的连接，url和deploy的配置为：</li></ul></b></font></p></li></ol><p></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">url: https://unclevicky.github.io</span><br><span class="line">root: /</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/unclevicky/unclevicky.github.io.git</span><br><span class="line"></span><br></pre></td></tr></table></figure><p style="text-indent:2em">   <font color="red">   <b><ul><li>如果github使用的“项目的GitHub Pages实现多主页”方法，根据上面让记住的连接，url需要指定具体的项目名称，url和deploy的配置为：   </li></ul></b>   </font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">url: https://unclevicky.github.io/rabbitBear/</span><br><span class="line">root: /rabbitBear</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/unclevicky/rabbitBear.git</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>项目的GitHub Pages实现多主页的配置如下</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://example.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line">url: https://unclevicky.github.io/rabbitBear/</span><br><span class="line">root: /rabbitBear</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  trailing_html: <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://example.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/unclevicky/rabbitBear.git</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><ol start="3"><li>在本地执行hexo的编译和发布命令，则可成功发布到github上<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean <span class="comment"># 删除以前的发布</span></span><br><span class="line">hexo g -d  <span class="comment"># 重新编译生成，并按配置文件中的github信息，发布到对应的网站上</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="公网访问访问博客主页"><a href="#公网访问访问博客主页" class="headerlink" title="公网访问访问博客主页"></a><strong>公网访问访问博客主页</strong></h3><ol><li><font color="red"><b>直接个人主页方式</b></font><br><a href="https://xxxx.github.io/%EF%BC%8Cxxxx%E6%98%AF%E4%BD%A0%E7%9A%84github%E7%94%A8%E6%88%B7%E5%90%8D">https://xxxx.github.io/，xxxx是你的github用户名</a><br>例如：<a href="https://unclevicky.github.io/">https://unclevicky.github.io/</a></li><li><font color="red"><b>项目多主页方式</b></font><br><a href="https://xxxx.github.io/yyyy/%EF%BC%8Cxxxx%E6%98%AF%E4%BD%A0%E7%9A%84github%E7%94%A8%E6%88%B7%E5%90%8D,yyyy%E6%98%AF%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%90%8D">https://xxxx.github.io/yyyy/，xxxx是你的github用户名,yyyy是你的项目名</a><br>例如：<a href="https://unclevicky.github.io/rabbitBear/">https://unclevicky.github.io/rabbitBear/</a></li></ol><h2 id="修改博客样式"><a href="#修改博客样式" class="headerlink" title="修改博客样式"></a><strong>修改博客样式</strong></h2><ol><li>默认的样式不是很好看，可以自己DIY样式和功能，比如统计访问量、设置分类、增加订阅、回复等功能，这也是为什么要搭建自己模块的原因。<strong>DIY！</strong></li><li>当然也可以使用网上那些达人们已经diy好的样式，比如X君给我推荐的buterfly这款样式。<ul><li>下载样式到博客的themes目录，在线安装和手工下载都可以。以butterfly为例<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在cmd或bash下执行</span></span><br><span class="line"><span class="comment"># 下载并安装样式文件</span></span><br><span class="line">npm i hexo-theme-butterfly</span><br><span class="line"><span class="comment"># 下载并安装该样式需要的插件，每个样式需要的插件不一样，根据实际需要来，否则有些样式显示不出来</span></span><br><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure></li></ul></li><li>hexo博客目录的配置文件**_config.yml**，找到”theme”，修改成刚下载的”butterfly”<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line">theme: butterfly</span><br></pre></td></tr></table></figure></li><li>最终效果如下<img src="/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/butterfly.png" class title="butterfly样式效果"></li></ol><h2 id="写新博客"><a href="#写新博客" class="headerlink" title="写新博客"></a><strong>写新博客</strong></h2><ol><li>在<strong>源文件</strong>的根目录执行，<code>hexo new xxxx</code>,xxxx是博客名称，支持中文。例如:<code>hexo new 博客基础环境搭建（非常详细）</code>。</li><li>则在博客的”source&#x2F;_posts&#x2F;“目录下生产一个，同名的.md文件，例如”hexo博客基础环境搭建（非常详细）.md”，此文件就是我们的博客源文件，修改此文件，把博客内容写进去，然后使用前面提到的,<code>hexo clean</code> <code>hexo g -d</code>,即可完成编译和发布。</li><li><strong>.md是markdown语言写的文件，非常简洁和灵活，至于如何使用.md文件写博客，将在后续的博客中陆续更新。本篇文章即是用此方法编写完成。对于我这个新手来说，入门还是比较简单的。</strong></li></ol><h2 id="The-End！-Have-Fun！"><a href="#The-End！-Have-Fun！" class="headerlink" title="The End！ Have Fun！"></a>The End！ Have Fun！</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;【背景】&quot;&gt;&lt;a href=&quot;#【背景】&quot; class=&quot;headerlink&quot; title=&quot;【背景】&quot;&gt;&lt;/a&gt;&lt;strong&gt;【背景】&lt;/strong&gt;&lt;/h2&gt;&lt;p style=&quot;text-indent:2em&quot;&gt;
我是一名学财务的文科生，没有任何计算机基</summary>
      
    
    
    
    <category term="基础教程" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"/>
    
    <category term="环境搭建" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="hexo" scheme="https://unclevicky.github.io/rabbitBear/tags/hexo/"/>
    
    <category term="github" scheme="https://unclevicky.github.io/rabbitBear/tags/github/"/>
    
    <category term="博客" scheme="https://unclevicky.github.io/rabbitBear/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>【量化投资】05.读取csv文件保存到mysql数据库</title>
    <link href="https://unclevicky.github.io/rabbitBear/2021/02/03/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%845/"/>
    <id>https://unclevicky.github.io/rabbitBear/2021/02/03/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%845/</id>
    <published>2021-02-03T15:01:56.000Z</published>
    <updated>2021-02-07T02:41:23.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="【老博客地址】"><a href="#【老博客地址】" class="headerlink" title="【老博客地址】"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/">【CSDN】博客主页</a><br>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/article/details/111321871">【量化投资】00.资源篇——持续更新</a><br>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/article/details/111300459">【量化投资】01.基本概念</a><br>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/article/details/111326137">【量化投资】02.数据接口初探——excel读取新浪股票api数据</a><br>&ensp;&ensp;&ensp;&ensp;<a href="https://blog.csdn.net/MissYourKiss/article/details/111472606">【量化投资】03.量化工程abu学习之量化基础（1&#x2F;3）</a></p><h3 id="【目标】"><a href="#【目标】" class="headerlink" title="【目标】"></a><strong>【目标】</strong></h3><p>&emsp;&emsp;接上文，将<a href="https://unclevicky.github.io/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/">【量化投资】04.使用python爬取股票基础数据</a>中爬取的数据保存到mysql数据库中</p><h3 id="【最终效果】"><a href="#【最终效果】" class="headerlink" title="【最终效果】"></a><strong>【最终效果】</strong></h3><img src="/rabbitBear/2021/02/03/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%845/ts_stock_basics.png" class title="股票列表数据库Navicat截图"><h3 id="【准备工作】"><a href="#【准备工作】" class="headerlink" title="【准备工作】"></a><strong>【准备工作】</strong></h3><ul><li>安装mysql数据库（本地或docker方式都可以）</li><li>安装python操作mysql所需要的包<ul><li><code>pip install pymysql</code></li></ul></li><li>（选）安装Navicat客户端，用以查询数据库</li></ul><h3 id="【创建mysql数据库表】"><a href="#【创建mysql数据库表】" class="headerlink" title="【创建mysql数据库表】"></a><strong>【创建mysql数据库表】</strong></h3> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ts_stock_basics(code <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;代码&#x27;</span>,name <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;名称&#x27;</span>,industry <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;所属行业&#x27;</span>,area <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;地区&#x27;</span>,pe <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;市盈率&#x27;</span>,outstanding <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;流通股本(亿)&#x27;</span>,totals <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;总股本(亿)&#x27;</span>,totalAssets <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;总资产(万)&#x27;</span>,liquidAssets <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;流动资产&#x27;</span>,fixedAssets <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;固定资产&#x27;</span>,reserved <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;公积金&#x27;</span>,reservedPerShare <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;每股公积金&#x27;</span>,esp <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;每股收益&#x27;</span>,bvps <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;每股净资&#x27;</span>,pb <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;市净率&#x27;</span>,timeToMarket <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;上市日期&#x27;</span>,undp <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;未分利润&#x27;</span>,perundp <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;每股未分配&#x27;</span>,rev <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;收入同比(%)&#x27;</span>,profit <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;利润同比(%)&#x27;</span>,gpr <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;毛利率(%)&#x27;</span>,npr <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;净利润率(%)&#x27;</span>,holders <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;股东人数&#x27;</span>,<span class="keyword">PRIMARY</span> KEY (code) ) COMMENT<span class="operator">=</span><span class="string">&#x27;股票列表&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="【完整代码：读取csv文件，并插入到数据库】"><a href="#【完整代码：读取csv文件，并插入到数据库】" class="headerlink" title="【完整代码：读取csv文件，并插入到数据库】"></a><strong>【完整代码：读取csv文件，并插入到数据库】</strong></h3><p><strong>【重要】需要更改自己的数据库地址、用户名和密码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">MYSQL_HOST=<span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line">MYSQL_USER=<span class="string">&#x27;root&#x27;</span></span><br><span class="line">MYSQL_PWD=<span class="string">&#x27;mariadb&#x27;</span></span><br><span class="line">MYSQL_DB=<span class="string">&#x27;stock_data&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立数据连接</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">conn</span>():</span><br><span class="line">    db = pymysql.connect(MYSQL_HOST, MYSQL_USER, MYSQL_PWD, MYSQL_DB, port=<span class="number">3306</span>, charset=<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> db</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">insertTSB</span>():</span><br><span class="line">   </span><br><span class="line">    <span class="comment"># 读取csv文件</span></span><br><span class="line">    file = <span class="built_in">open</span>(<span class="string">&#x27;stock_info.csv&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    fileReader = csv.reader(file)</span><br><span class="line">    filedata = <span class="built_in">list</span>(fileReader) </span><br><span class="line">    db = conn()</span><br><span class="line">    c = db.cursor()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 有些为空的数据，csv自动变为-, 需要处理掉， 否则插入数据库会报错</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> filedata:</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(row)):</span><br><span class="line">            <span class="keyword">if</span> row[_] == <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                row[_]=<span class="string">&#x27;\&#x27;\&#x27;&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i,val <span class="keyword">in</span> <span class="built_in">enumerate</span>(filedata):</span><br><span class="line">        <span class="keyword">if</span> i==<span class="number">0</span>: <span class="comment"># 跳过文件头</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="comment"># 组装插入语句</span></span><br><span class="line">        <span class="comment"># 股票代码 股票名称 行业 地区 pe 流通股本 总股本 总资产 流动资产 上市时间 每股未分配利润 利润同比 净利润率</span></span><br><span class="line">        sql = <span class="string">&quot;INSERT INTO ts_stock_basics(code, name, industry, area, pe, \</span></span><br><span class="line"><span class="string">        outstanding, totals, totalAssets, liquidAssets, timeToMarket, perundp, profit, npr) \</span></span><br><span class="line"><span class="string">       VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s )&quot;</span> % \</span><br><span class="line">       (<span class="built_in">str</span>(val[<span class="number">0</span>]).zfill(<span class="number">6</span>), <span class="string">&#x27;\&#x27;&#x27;</span>+val[<span class="number">1</span>]+<span class="string">&#x27;\&#x27;&#x27;</span>, <span class="string">&#x27;\&#x27;&#x27;</span>+val[<span class="number">20</span>]+<span class="string">&#x27;\&#x27;&#x27;</span>,  <span class="string">&#x27;\&#x27;&#x27;</span>+val[<span class="number">21</span>]+<span class="string">&#x27;\&#x27;&#x27;</span>, val[<span class="number">22</span>], val[<span class="number">15</span>], val[<span class="number">14</span>], val[<span class="number">18</span>], val[<span class="number">19</span>], val[<span class="number">29</span>], val[<span class="number">30</span>], val[<span class="number">26</span>], val[<span class="number">27</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 执行语句</span></span><br><span class="line">            c.execute(sql)</span><br><span class="line">            <span class="comment"># 提交</span></span><br><span class="line">            db.commit()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="comment"># 如果出错，把错误语句打印出来，方便分析</span></span><br><span class="line">            <span class="built_in">print</span>(sql)</span><br><span class="line">            <span class="comment"># 如果出错需要回滚</span></span><br><span class="line">            db.rollback()</span><br><span class="line">    <span class="comment"># 一定不要忘了关闭数据库连接</span></span><br><span class="line">    db.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除所有数据    </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">deleteTSB</span>():</span><br><span class="line">    db = conn()</span><br><span class="line">    <span class="comment"># 使用cursor()方法获取操作游标 </span></span><br><span class="line">    cursor = db.cursor()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># SQL 删除语句</span></span><br><span class="line">    sql = <span class="string">&quot;DELETE FROM ts_stock_basics WHERE 1=1 &quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">       <span class="comment"># 执行SQL语句</span></span><br><span class="line">       cursor.execute(sql)</span><br><span class="line">       <span class="comment"># 提交修改</span></span><br><span class="line">       db.commit()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">       <span class="comment"># 发生错误时回滚</span></span><br><span class="line">       db.rollback()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭连接</span></span><br><span class="line">    db.close()</span><br><span class="line">    </span><br><span class="line"><span class="comment">#deleteTSB() # 如果需要重新插入，用此方法删除数据库表内容</span></span><br><span class="line">insertTSB()</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;【老博客地址】&quot;&gt;&lt;a href=&quot;#【老博客地址】&quot; class=&quot;headerlink&quot; title=&quot;【老博客地址】&quot;&gt;&lt;/a&gt;&lt;strong&gt;【老博客地址】&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&amp;emsp;&amp;emsp;&lt;a href=&quot;https://blog</summary>
      
    
    
    
    <category term="财富" scheme="https://unclevicky.github.io/rabbitBear/categories/%E8%B4%A2%E5%AF%8C/"/>
    
    <category term="量化投资" scheme="https://unclevicky.github.io/rabbitBear/categories/%E8%B4%A2%E5%AF%8C/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/"/>
    
    <category term="技术工具" scheme="https://unclevicky.github.io/rabbitBear/categories/%E8%B4%A2%E5%AF%8C/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/%E6%8A%80%E6%9C%AF%E5%B7%A5%E5%85%B7/"/>
    
    <category term="基础" scheme="https://unclevicky.github.io/rabbitBear/categories/%E8%B4%A2%E5%AF%8C/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/%E6%8A%80%E6%9C%AF%E5%B7%A5%E5%85%B7/%E5%9F%BA%E7%A1%80/"/>
    
    <category term="基础教程" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"/>
    
    <category term="量化投资" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/"/>
    
    
    <category term="量化投资" scheme="https://unclevicky.github.io/rabbitBear/tags/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/"/>
    
    <category term="数据获取" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/"/>
    
    <category term="技术" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="python" scheme="https://unclevicky.github.io/rabbitBear/tags/python/"/>
    
    <category term="mysql" scheme="https://unclevicky.github.io/rabbitBear/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>【量化投资】04.使用python爬取股票基础数据</title>
    <link href="https://unclevicky.github.io/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/"/>
    <id>https://unclevicky.github.io/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/</id>
    <published>2021-02-01T13:34:02.000Z</published>
    <updated>2023-12-02T08:03:10.769Z</updated>
    
    <content type="html"><![CDATA[<h3 id="【老博客地址】"><a href="#【老博客地址】" class="headerlink" title="【老博客地址】"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/">【CSDN】博客主页</a><br>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/article/details/111321871">【量化投资】00.资源篇——持续更新</a><br>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/article/details/111300459">【量化投资】01.基本概念</a><br>&emsp;&emsp;<a href="https://blog.csdn.net/MissYourKiss/article/details/111326137">【量化投资】02.数据接口初探——excel读取新浪股票api数据</a><br>&ensp;&ensp;&ensp;&ensp;<a href="https://blog.csdn.net/MissYourKiss/article/details/111472606">【量化投资】03.量化工程abu学习之量化基础（1&#x2F;3）</a></p><h3 id="【背景】"><a href="#【背景】" class="headerlink" title="【背景】"></a><strong>【背景】</strong></h3><p style="text-indent:2em">之前的文章里推荐了好几个量化投资程序获取数据的方法，但是后来发现大多都有了限制，包括某share都得用积分才能使用，积分的获取非常麻烦。求人不如靠己！所以就开始自己一点点的自己想办法获取数据，并存储到本地。</p><p style="text-indent:2em">本次的目标是从东方财富的官网页面上抓取股票的基本数据，内容如下:</p><ul><li>本期<ul><li>获取A股所有的股票列表和一些基本信息，并保存到cvs文件</li><li>获取各股票的一些详细信息，并保存到csv文件</li></ul></li><li>计划<ul><li>后续将数据进行结构化保存到数据库</li><li>后续改成多线程获取，加速爬取数据</li></ul></li></ul><h3 id="【最终效果】"><a href="#【最终效果】" class="headerlink" title="【最终效果】"></a><strong>【最终效果】</strong></h3><br><img src="/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_list_web.png" class title="股票清单和基本信息-网页"><img src="/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_list_csv.png" class title="股票清单和基本信息-csv"><img src="/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_info_web.png" class title="股票详细信息-网页"><img src="/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_info_csv.png" class title="股票详细信息-csv"><h3 id="【代码】"><a href="#【代码】" class="headerlink" title="【代码】"></a><strong>【代码】</strong></h3><h4 id="获取所有A股股票清单"><a href="#获取所有A股股票清单" class="headerlink" title="获取所有A股股票清单"></a><strong>获取所有A股股票清单</strong></h4><h5 id="☆完整代码"><a href="#☆完整代码" class="headerlink" title="☆完整代码"></a><strong>☆完整代码</strong></h5><pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_html</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;html.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(requests.get(url).text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 股票信息主页</span></span><br><span class="line"><span class="comment"># http://quote.eastmoney.com/center/gridlist.html#hs_a_board</span></span><br><span class="line"><span class="comment"># 沪深A股列表真实链接</span></span><br><span class="line">url = <span class="string">&quot;http://11.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112405084455909086425_1610764452571&amp;pn=1&amp;pz=4400&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;fid=f3&amp;fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&amp;_=1610764452635&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_file</span>():</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;html.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        all_contents = f.read()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 正则表达式，获取股票列表信息json串</span></span><br><span class="line">    re_cont = re.findall(<span class="string">&#x27;\\((.*?)\\);&#x27;</span>,all_contents,re.S)</span><br><span class="line">    js_cont = json.loads(re_cont[<span class="number">0</span>])</span><br><span class="line">    stock_list=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> js_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;diff&#x27;</span>]:</span><br><span class="line">        <span class="comment">#_stock=&#123;&#125;</span></span><br><span class="line">        <span class="comment">#_stock[&#x27;code&#x27;]=i[&#x27;f12&#x27;]</span></span><br><span class="line">        <span class="comment">#_stock[&#x27;name&#x27;]=i[&#x27;f14&#x27;]</span></span><br><span class="line">        <span class="comment">#_stock[&#x27;new_price&#x27;]=i[&#x27;f2&#x27;]</span></span><br><span class="line">        conten=[]  <span class="comment"># 存放单只股票信息</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f12&#x27;</span>]) <span class="comment"># 股票代码</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f14&#x27;</span>]) <span class="comment"># 股票名称</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f2&#x27;</span>]) <span class="comment"># 最新价</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f3&#x27;</span>]) <span class="comment"># 涨跌幅</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f4&#x27;</span>]) <span class="comment"># 涨跌额</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f5&#x27;</span>]) <span class="comment"># 成交量（手）</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f6&#x27;</span>]) <span class="comment"># 成交额</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f7&#x27;</span>]) <span class="comment"># 振幅</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f15&#x27;</span>]) <span class="comment"># 最高</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f16&#x27;</span>]) <span class="comment"># 最低</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f17&#x27;</span>]) <span class="comment"># 今开</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f18&#x27;</span>]) <span class="comment"># 昨收</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f10&#x27;</span>]) <span class="comment"># 量比</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f8&#x27;</span>]) <span class="comment"># 换手率</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f9&#x27;</span>]) <span class="comment"># 市盈率（动态）</span></span><br><span class="line">        conten.append(i[<span class="string">&#x27;f23&#x27;</span>]) <span class="comment"># 市净率</span></span><br><span class="line">        stock_list.append(conten)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;stock.csv&#x27;</span>,<span class="string">&#x27;w+&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="comment"># 写入表头</span></span><br><span class="line">        n=<span class="number">0</span></span><br><span class="line">        single=(<span class="built_in">str</span>(n)+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;股票代码&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;股票名称&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;最新价&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;涨跌幅&#x27;</span>+<span class="string">&#x27;,&#x27;</span></span><br><span class="line">                +<span class="string">&#x27;涨跌额&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;成交量（手）&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;成交额（亿）&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;振幅&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;最高&#x27;</span>+<span class="string">&#x27;,&#x27;</span></span><br><span class="line">                +<span class="string">&#x27;最低&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;今开&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;昨收&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;量比&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;换手率&#x27;</span>+<span class="string">&#x27;,&#x27;</span></span><br><span class="line">                +<span class="string">&#x27;市盈率（动态）&#x27;</span>+<span class="string">&#x27;,&#x27;</span>+<span class="string">&#x27;市净率&#x27;</span>+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">        f.write(single)</span><br><span class="line">        <span class="comment"># 写入股票数据</span></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> stock_list:</span><br><span class="line">            n+=<span class="number">1</span></span><br><span class="line">            single = <span class="built_in">str</span>(n)</span><br><span class="line">            <span class="keyword">for</span> val <span class="keyword">in</span> _ :</span><br><span class="line">                single=single+<span class="string">&#x27;,&#x27;</span>+<span class="built_in">str</span>(val)</span><br><span class="line">            single=single+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">            f.write(single)</span><br><span class="line"></span><br><span class="line">get_html(url)</span><br><span class="line">read_file()</span><br></pre></td></tr></table></figure></code></pre><h5 id="☆代码解读"><a href="#☆代码解读" class="headerlink" title="☆代码解读"></a><strong>☆代码解读</strong></h5><ol><li>获取返回股票列表信息的<strong>真实连接</strong></li></ol><ul><li>打开东方财富的 <a href="http://quote.eastmoney.com/center/gridlist.html#hs_a_board">主页</a> ，获取返回值的html，查看源码，<strong>发现其页面里面没有股票信息</strong>,说明是通过生成页面框架，然后动态加载的。</li><li>使用<strong>fiddler或者chrome自带功能</strong>（可以参考我之前的相关文章）,点击“沪深A股”或者点击“翻页”，从fiddler捕获的连接或chrome的<strong>开发者工具（F12）</strong>的Network中找到最新的几个连接，找到真实的连接.  <img src="/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/get_sl_real_url.png" class title="chrome的F12查看Network信息"></li><li>分析请求request的header请求，发现关键信息，pn&#x3D;3，pz&#x3D;20，猜想是第3页和每页20个的请求参数，其他f1,f2…应该是需要请求哪些数据的参数。那么我们把参数改成pn&#x3D;1&amp;pz&#x3D;5000，也就是一次性将A股的4000多只股票全部获取到。  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Request URL: http://<span class="number">56.</span>push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124034105331658665383_1612251280345&amp;pn=<span class="number">3</span>&amp;pz=<span class="number">20</span>&amp;po=<span class="number">1</span>&amp;np=<span class="number">1</span>&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=<span class="number">2</span>&amp;invt=<span class="number">2</span>&amp;fid=f3&amp;fs=m:<span class="number">0</span>+t:<span class="number">6</span>,m:<span class="number">0</span>+t:<span class="number">13</span>,m:<span class="number">0</span>+t:<span class="number">80</span>,m:<span class="number">1</span>+t:<span class="number">2</span>,m:<span class="number">1</span>+t:<span class="number">23</span>&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&amp;_=<span class="number">1612251280452</span></span><br><span class="line">Request Method: GET</span><br><span class="line">Status Code: <span class="number">200</span> OK</span><br><span class="line">Remote Address: <span class="number">101.89</span><span class="number">.224</span><span class="number">.78</span>:<span class="number">80</span></span><br><span class="line">Referrer Policy: strict-origin-when-cross-origin</span><br></pre></td></tr></table></figure>  <img src="/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/sl_real_url_req.png" class title="分析请求信息"></li></ul><ol start="2"><li>访问真实连接，并对返回值进行解析</li></ol><ul><li>分析返回reponse，发现其是一个非常规整json字符串，外面包了一个小括弧，那就非常好办了，通过正则表达式把json字符串取出来，然后使用json包进行解析即可。</li><li>通过页面对比，发现每个返回字段代表的中文含义，例如：f12是股票代码  <img src="/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/sl_real_url_rsp.png" class title="分析返回信息"></li></ul><h4 id="获取每只股票信息信息"><a href="#获取每只股票信息信息" class="headerlink" title="获取每只股票信息信息"></a><strong>获取每只股票信息信息</strong></h4><h5 id="☆完整代码-1"><a href="#☆完整代码-1" class="headerlink" title="☆完整代码"></a><strong>☆完整代码</strong></h5><pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取文件,拼接地址</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;info_fin.csv&#x27;</span>,<span class="string">&#x27;w+&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">f.write(<span class="string">&#x27;股票代码&#x27;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;股票名称&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;最新价&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;最高价&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;最低价&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;今开&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;总手&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;金额&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;外盘&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;量比&quot;</span></span><br><span class="line">    +<span class="string">&quot;,&quot;</span>+<span class="string">&quot;涨停&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;跌停&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;收益（新）&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;昨收&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;总股本&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;流通股&quot;</span></span><br><span class="line">        +<span class="string">&quot;,&quot;</span>+<span class="string">&quot;净利润&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;每股净资产&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;总值&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;流值&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;板块&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;地区&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;pe&quot;</span></span><br><span class="line">        +<span class="string">&quot;,&quot;</span>+<span class="string">&quot;ROE&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;总营收&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;总营收同比&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;净利润同比&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;净利率&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;负债率&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;上市时间&quot;</span></span><br><span class="line">        +<span class="string">&quot;,&quot;</span>+<span class="string">&quot;每股未分配利润&quot;</span>+<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    </span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;stock.csv&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">fileReader = csv.reader(file)</span><br><span class="line">filedata = <span class="built_in">list</span>(fileReader) </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _,i <span class="keyword">in</span> <span class="built_in">enumerate</span>(filedata):</span><br><span class="line">    <span class="keyword">if</span> _==<span class="number">0</span>: <span class="comment"># 跳过文件头</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> i[<span class="number">1</span>].startswith(<span class="string">&#x27;6&#x27;</span>):</span><br><span class="line">        addr = <span class="string">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=1.&quot;</span> + i[<span class="number">1</span>] + <span class="string">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        addr = <span class="string">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=0.&quot;</span> + i[<span class="number">1</span>] + <span class="string">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    re_cont = re.findall(<span class="string">&quot;\\((.*?)\\);&quot;</span>,requests.get(addr).text,re.S)</span><br><span class="line">    je_cont = json.loads(re_cont[<span class="number">0</span>])</span><br><span class="line">    <span class="comment">#fin = &#123;&#125;</span></span><br><span class="line">    <span class="comment">#fin[&#x27;code&#x27;] = je_cont[&#x27;data&#x27;][&#x27;f57&#x27;]</span></span><br><span class="line">    <span class="comment">#fin[&#x27;name&#x27;] = je_cont[&#x27;data&#x27;][&#x27;f58&#x27;]</span></span><br><span class="line">    work = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="comment">#print(str(je_cont[&#x27;data&#x27;][&#x27;f43&#x27;]))</span></span><br><span class="line">    <span class="comment">#print(&#x27;12&#x27;)</span></span><br><span class="line">    work = (<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f57&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f58&#x27;</span>])+<span class="string">&quot;,&quot;</span> + <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f43&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f44&#x27;</span>])</span><br><span class="line">    + <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f45&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f46&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f47&#x27;</span>])</span><br><span class="line">    + <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f48&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f49&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f50&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f51&#x27;</span>])</span><br><span class="line">    + <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f52&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f55&#x27;</span>])</span><br><span class="line">    + <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f60&#x27;</span>])+ <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f84&#x27;</span>])+<span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f85&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f105&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f92&#x27;</span>])</span><br><span class="line">    + <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f116&#x27;</span>])+<span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f117&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f127&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f128&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f162&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f173&#x27;</span>])</span><br><span class="line">    + <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f183&#x27;</span>])+<span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f184&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f185&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f187&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f188&#x27;</span>])+<span class="string">&quot;,&quot;</span>+<span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f189&#x27;</span>])</span><br><span class="line">    + <span class="string">&quot;,&quot;</span>+ <span class="built_in">str</span>(je_cont[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;f190&#x27;</span>]))</span><br><span class="line"></span><br><span class="line">    work = work+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    f.write(work) </span><br></pre></td></tr></table></figure></code></pre><h5 id="☆代码解读-1"><a href="#☆代码解读-1" class="headerlink" title="☆代码解读"></a><strong>☆代码解读</strong></h5><ol><li>通过点击详情页面，找到每只股票详细信息访问的连接的规律<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://quote.eastmoney.com/sz******.html</span><br><span class="line">http://quote.eastmoney.com/sh******.html</span><br></pre></td></tr></table></figure></li><li>同样的方法，发现所有的股票详细数据，都是动态加载的。使用<strong>fiddler或者chrome自带功能</strong>，获取真实连接。</li><li>分析规律组装真实连接，“6”开头的请求参数为“1.股票代码”，其他是“0.股票代码”<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">if</span> i[<span class="number">1</span>].startswith(<span class="string">&#x27;6&#x27;</span>):</span><br><span class="line">    addr = <span class="string">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=1.&quot;</span> + i[<span class="number">1</span>] + <span class="string">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    addr = <span class="string">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=0.&quot;</span> + i[<span class="number">1</span>] + <span class="string">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li>解析返回reponse，同样的正则表达式+json解析，然后通过页面对比，发现每个返回字段对比的中文含义，例如：f57代表股票代码<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">最新价:f43</span><br><span class="line">最高:f44</span><br><span class="line">最低:f45</span><br><span class="line">今开:f46</span><br><span class="line">总手:f47</span><br><span class="line">金额:f48</span><br><span class="line">外盘:f49</span><br><span class="line">量比:f50</span><br><span class="line">涨停:f51</span><br><span class="line">跌停:f52</span><br><span class="line">收益（三）: f55</span><br><span class="line">股票代码:f57</span><br><span class="line">股票名称:f58</span><br><span class="line">昨收:f60</span><br><span class="line">总股本:f84</span><br><span class="line">流通股:f85</span><br><span class="line">净利润:f105</span><br><span class="line">每股净资产:f92</span><br><span class="line">总值:f116</span><br><span class="line">流值:f117</span><br><span class="line">板块：f127</span><br><span class="line">地区：f128</span><br><span class="line">pe（动）:f162</span><br><span class="line">ROE:f173</span><br><span class="line">总营收:f183</span><br><span class="line">总营收同比:f184</span><br><span class="line">净利润同比:f185</span><br><span class="line">净利率:f187</span><br><span class="line">负债率:f188</span><br><span class="line">上市时间:f189</span><br><span class="line">每股未分配利润:f190</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;【老博客地址】&quot;&gt;&lt;a href=&quot;#【老博客地址】&quot; class=&quot;headerlink&quot; title=&quot;【老博客地址】&quot;&gt;&lt;/a&gt;&lt;strong&gt;【老博客地址】&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&amp;emsp;&amp;emsp;&lt;a href=&quot;https://blog</summary>
      
    
    
    
    <category term="财富" scheme="https://unclevicky.github.io/rabbitBear/categories/%E8%B4%A2%E5%AF%8C/"/>
    
    <category term="量化投资" scheme="https://unclevicky.github.io/rabbitBear/categories/%E8%B4%A2%E5%AF%8C/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/"/>
    
    <category term="技术工具" scheme="https://unclevicky.github.io/rabbitBear/categories/%E8%B4%A2%E5%AF%8C/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/%E6%8A%80%E6%9C%AF%E5%B7%A5%E5%85%B7/"/>
    
    <category term="基础" scheme="https://unclevicky.github.io/rabbitBear/categories/%E8%B4%A2%E5%AF%8C/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/%E6%8A%80%E6%9C%AF%E5%B7%A5%E5%85%B7/%E5%9F%BA%E7%A1%80/"/>
    
    <category term="基础教程" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"/>
    
    <category term="量化投资" scheme="https://unclevicky.github.io/rabbitBear/categories/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/"/>
    
    
    <category term="量化投资" scheme="https://unclevicky.github.io/rabbitBear/tags/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/"/>
    
    <category term="数据获取" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96/"/>
    
    <category term="技术" scheme="https://unclevicky.github.io/rabbitBear/tags/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="python" scheme="https://unclevicky.github.io/rabbitBear/tags/python/"/>
    
  </entry>
  
</feed>
